/*
 * popcorn.js version 35665ff
 * http://popcornjs.org
 *
 * Copyright 2011, Mozilla Foundation
 * Licensed under the MIT license
 */

(function(m,j){function k(a){y.put.call(this,a)}function d(a){this.parent=a;this.byStart=[{start:-1,end:-1}];this.byEnd=[{start:-1,end:-1}];this.animating=[];this.endIndex=this.startIndex=0;this.previousUpdateTime=-1;Object.defineProperty(this,"count",{get:function(){return this.byStart.length}})}function b(a,h){return function(){if(i.plugin.debug)return a.apply(this,arguments);try{return a.apply(this,arguments)}catch(l){i.plugin.errors.push({plugin:h,thrown:l,source:a.toString()});this.emit("pluginerror",
i.plugin.errors)}}}if(j.addEventListener){var c=Array.prototype,f=Object.prototype,g=c.forEach,o=c.slice,t=f.hasOwnProperty,p=f.toString,q=m.Popcorn,v=[],w=false,A={events:{hash:{},apis:{}}},G=function(){return m.requestAnimationFrame||m.webkitRequestAnimationFrame||m.mozRequestAnimationFrame||m.oRequestAnimationFrame||m.msRequestAnimationFrame||function(a){m.setTimeout(a,16)}}(),y={put:function(a){Object.getOwnPropertyNames(a).forEach(function(h){this[h]=a[h]},this)}},i=function(a,h){return new i.p.init(a,
h||null)};i.version="35665ff";i.isSupported=true;i.instances=[];i.p=i.prototype={init:function(a,h){var l,e=this;if(typeof a==="function")if(j.readyState==="complete")a(j,i);else{v.push(a);if(!w){w=true;var u=function(){j.removeEventListener("DOMContentLoaded",u,false);for(var D=0,C=v.length;D<C;D++)v[D].call(j,i);v=null};j.addEventListener("DOMContentLoaded",u,false)}}else{if(typeof a==="string")try{l=j.querySelector(a)}catch(s){throw Error("Popcorn.js Error: Invalid media element selector: "+a);
}this.media=l||a;l=this.media.nodeName&&this.media.nodeName.toLowerCase()||"video";this[l]=this.media;this.options=i.extend({},h)||{};this.id=this.options.id||i.guid(l);if(i.byId(this.id))throw Error("Popcorn.js Error: Cannot use duplicate ID ("+this.id+")");this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:i.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:new d(this)};i.instances.push(this);var x=function(){if(e.media.currentTime<
0)e.media.currentTime=0;e.media.removeEventListener("loadedmetadata",x,false);var D,C,F,z,n;D=e.media.duration;D=D!=D?Number.MAX_VALUE:D+1;i.addTrackEvent(e,{start:D,end:D});if(e.options.frameAnimation){e.data.timeUpdate=function(){i.timeUpdate(e,{});i.forEach(i.manifest,function(r,M){if(C=e.data.running[M]){z=C.length;for(var N=0;N<z;N++){F=C[N];(n=F._natives)&&n.frame&&n.frame.call(e,{},F,e.currentTime())}}});e.emit("timeupdate");!e.isDestroyed&&G(e.data.timeUpdate)};!e.isDestroyed&&G(e.data.timeUpdate)}else{e.data.timeUpdate=
function(r){i.timeUpdate(e,r)};e.isDestroyed||e.media.addEventListener("timeupdate",e.data.timeUpdate,false)}};Object.defineProperty(this,"error",{get:function(){return e.media.error}});e.media.readyState>=1?x():e.media.addEventListener("loadedmetadata",x,false);return this}}};i.p.init.prototype=i.p;i.byId=function(a){for(var h=i.instances,l=h.length,e=0;e<l;e++)if(h[e].id===a)return h[e];return null};i.forEach=function(a,h,l){if(!a||!h)return{};l=l||this;var e,u;if(g&&a.forEach===g)return a.forEach(h,
l);if(p.call(a)==="[object NodeList]"){e=0;for(u=a.length;e<u;e++)h.call(l,a[e],e,a);return a}for(e in a)t.call(a,e)&&h.call(l,a[e],e,a);return a};i.extend=function(a){var h=o.call(arguments,1);i.forEach(h,function(l){for(var e in l)a[e]=l[e]});return a};i.extend(i,{noConflict:function(a){if(a)m.Popcorn=q;return i},error:function(a){throw Error(a);},guid:function(a){i.guid.counter++;return(a?a:"")+(+new Date+i.guid.counter)},sizeOf:function(a){var h=0,l;for(l in a)h++;return h},isArray:Array.isArray||
function(a){return p.call(a)==="[object Array]"},nop:function(){},position:function(a){a=a.getBoundingClientRect();var h={},l=j.documentElement,e=j.body,u,s,x;u=l.clientTop||e.clientTop||0;s=l.clientLeft||e.clientLeft||0;x=m.pageYOffset&&l.scrollTop||e.scrollTop;l=m.pageXOffset&&l.scrollLeft||e.scrollLeft;u=Math.ceil(a.top+x-u);s=Math.ceil(a.left+l-s);for(var D in a)h[D]=Math.round(a[D]);return i.extend({},h,{top:u,left:s})},disable:function(a,h){if(!a.data.disabled[h]){a.data.disabled[h]=true;if(h in
i.registryByName&&a.data.running[h])for(var l=a.data.running[h].length-1,e;l>=0;l--){e=a.data.running[h][l];e._natives.end.call(a,null,e);a.emit("trackend",i.extend({},e,{plugin:e.type,type:"trackend"}))}return a}},enable:function(a,h){if(a.data.disabled[h]){a.data.disabled[h]=false;if(h in i.registryByName&&a.data.running[h])for(var l=a.data.running[h].length-1,e;l>=0;l--){e=a.data.running[h][l];e._natives.start.call(a,null,e);a.emit("trackstart",i.extend({},e,{plugin:e.type,type:"trackstart",track:e}))}return a}},
destroy:function(a){var h=a.data.events,l=a.data.trackEvents,e,u,s,x;for(u in h){e=h[u];for(s in e)delete e[s];h[u]=null}for(x in i.registryByName)i.removePlugin(a,x);l.byStart.length=0;l.byEnd.length=0;if(!a.isDestroyed){a.data.timeUpdate&&a.media.removeEventListener("timeupdate",a.data.timeUpdate,false);a.isDestroyed=true}i.instances.splice(i.instances.indexOf(a),1)}});i.guid.counter=1;i.extend(i.p,function(){var a={};i.forEach("load play pause currentTime playbackRate volume duration preload playbackRate autoplay loop controls muted buffered readyState seeking paused played seekable ended".split(/\s+/g),
function(h){a[h]=function(l){var e;if(typeof this.media[h]==="function"){if(l!=null&&/play|pause/.test(h))this.media.currentTime=i.util.toSeconds(l);this.media[h]();return this}if(l!=null){e=this.media[h];this.media[h]=l;e!==l&&this.emit("attrchange",{attribute:h,previousValue:e,currentValue:l});return this}return this.media[h]}});return a}());i.forEach("enable disable".split(" "),function(a){i.p[a]=function(h){return i[a](this,h)}});i.extend(i.p,{roundTime:function(){return Math.round(this.media.currentTime)},
exec:function(a,h,l){var e=arguments.length,u="trackadded",s,x;try{x=i.util.toSeconds(a)}catch(D){}if(typeof x==="number")a=x;if(typeof a==="number"&&e===2){l=h;h=a;a=i.guid("cue")}else if(e===1)h=-1;else if(s=this.getTrackEvent(a)){this.data.trackEvents.remove(a);i.removeTrackEvent.ref(this,a);u="cuechange";if(typeof a==="string"&&e===2){if(typeof h==="number")l=s._natives.start;if(typeof h==="function"){l=h;h=s.start}}}else if(e>=2){if(typeof h==="string"){try{x=i.util.toSeconds(h)}catch(C){}h=
x}if(typeof h==="number")l=l||i.nop();if(typeof h==="function"){l=h;h=-1}}e={id:a,start:h,end:h+1,_running:false,_natives:{start:l||i.nop,end:i.nop,type:"cue"}};if(u==="cuechange"){e._id=e.id||e._id||i.guid(e._natives.type);this.data.trackEvents.add(e);this.timeUpdate(this,null,true);i.addTrackEvent.ref(this,e);this.emit(u,i.extend({},e,{id:a,type:u,previousValue:{time:s.start,fn:s._natives.start},currentValue:{time:h,fn:l||i.nop},track:s}))}else i.addTrackEvent(this,e);return this},mute:function(a){a=
a==null||a===true?"muted":"unmuted";if(a==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(a==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(a);return this},unmute:function(a){return this.mute(a==null?false:!a)},position:function(){return i.position(this.media)},toggle:function(a){return i[this.data.disabled[a]?"enable":"disable"](this,a)},defaults:function(a,h){if(i.isArray(a)){i.forEach(a,function(l){for(var e in l)this.defaults(e,
l[e])},this);return this}if(!this.options.defaults)this.options.defaults={};this.options.defaults[a]||(this.options.defaults[a]={});i.extend(this.options.defaults[a],h);return this}});i.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange"};
i.Events.Natives=i.Events.UIEvents+" "+i.Events.MouseEvents+" "+i.Events.Events;A.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(a,h){for(var l=A.events.apiTypes,e=a.Natives.split(/\s+/g),u=0,s=e.length;u<s;u++)h.hash[e[u]]=true;l.forEach(function(x){h.apis[x]={};for(var D=a[x].split(/\s+/g),C=D.length,F=0;F<C;F++)h.apis[x][D[F]]=true})})(i.Events,A.events);i.events={isNative:function(a){return!!A.events.hash[a]},getInterface:function(a){if(!i.events.isNative(a))return false;var h=
A.events,l=h.apiTypes;h=h.apis;for(var e=0,u=l.length,s,x;e<u;e++){x=l[e];if(h[x][a]){s=x;break}}return s},all:i.Events.Natives.split(/\s+/g),fn:{trigger:function(a,h){var l,e=this.data.events[a];if(e){if(l=i.events.getInterface(a)){l=j.createEvent(l);l.initEvent(a,true,true,m,1);this.media.dispatchEvent(l);return this}for(l=e.slice();l.length;)l.shift().call(this,h)}return this},listen:function(a,h){var l=this,e=true,u=i.events.hooks[a],s,x;if(typeof h!=="function")throw Error("Popcorn.js Error: Listener is not a function");
if(!this.data.events[a]){this.data.events[a]=[];e=false}if(u){u.add&&u.add.call(this,{},h);if(u.bind)a=u.bind;if(u.handler){x=h;h=function(D){u.handler.call(l,D,x)}}e=true;if(!this.data.events[a]){this.data.events[a]=[];e=false}}this.data.events[a].push(h);!e&&i.events.all.indexOf(a)>-1&&this.media.addEventListener(a,function(D){if(l.data.events[a])for(s=l.data.events[a].slice();s.length;)s.shift().call(l,D)},false);return this},unlisten:function(a,h){var l,e=this.data.events[a];if(e){if(typeof h===
"string"){for(l=0;l<e.length;l++)e[l].name===h&&e.splice(l--,1);return this}else if(typeof h==="function"){for(;l!==-1;){l=e.indexOf(h);l!==-1&&e.splice(l,1)}return this}this.data.events[a]=null;return this}}},hooks:{canplayall:{bind:"canplaythrough",add:function(a,h){var l=false;if(this.media.readyState){setTimeout(function(){h.call(this,a)}.bind(this),0);l=true}this.data.hooks.canplayall={fired:l}},handler:function(a,h){if(!this.data.hooks.canplayall.fired){h.call(this,a);this.data.hooks.canplayall.fired=
true}}}}};i.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(a){i.p[a[0]]=i.p[a[1]]=i.events.fn[a[0]]});d.prototype.where=function(a){return(this.parent.getTrackEvents()||[]).filter(function(h){var l,e;if(!a)return true;for(l in a){e=a[l];if(h[l]&&h[l]===e||h._natives[l]&&h._natives[l]===e)return true}return false})};d.prototype.add=function(a){var h=this.byStart,l=this.byEnd,e;a&&a._id&&this.parent.data.history.push(a._id);a.start=i.util.toSeconds(a.start,this.parent.options.framerate);
a.end=i.util.toSeconds(a.end,this.parent.options.framerate);for(e=h.length-1;e>=0;e--)if(a.start>=h[e].start){h.splice(e+1,0,a);break}for(h=l.length-1;h>=0;h--)if(a.end>l[h].end){l.splice(h+1,0,a);break}e<=this.parent.data.trackEvents.startIndex&&a.start<=this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.startIndex++;h<=this.parent.data.trackEvents.endIndex&&a.end<this.parent.data.trackEvents.previousUpdateTime&&this.parent.data.trackEvents.endIndex++;if(a.end>this.parent.media.currentTime&&
a.start<=this.parent.media.currentTime){a._running=true;this.parent.data.running[a._natives.type].push(a);if(!this.parent.data.disabled[a._natives.type]){a._natives.start.call(this.parent,null,a);this.parent.emit("trackstart",i.extend({},a,{plugin:a._natives.type,type:"trackstart",track:a}))}}};d.prototype.remove=function(a,h){if(a instanceof k)a=a.id;if(typeof a==="object"){this.where(a).forEach(function(M){this.removeTrackEvent(M._id)},this.parent);return this}var l,e,u,s,x;u=this.byStart.length;
var D=0,C=0,F=[],z=[],n=[];x=[];var r={};for(h=h||{};--u>-1;){l=this.byStart[D];e=this.byEnd[D];if(!l._id){F.push(l);z.push(e)}if(l._id){l._id!==a&&F.push(l);e._id!==a&&z.push(e);if(l._id===a){C=D;s=l}}D++}u=this.animating.length;D=0;if(u)for(;--u>-1;){l=this.animating[D];l._id||n.push(l);l._id&&l._id!==a&&n.push(l);D++}C<=this.startIndex&&this.startIndex--;C<=this.endIndex&&this.endIndex--;this.byStart=F;this.byEnd=z;this.animating=n;u=this.parent.data.history.length;for(D=0;D<u;D++)this.parent.data.history[D]!==
a&&x.push(this.parent.data.history[D]);this.parent.data.history=x;r.start=s.start;r.end=s.end;if(h&&h.previous){r.start=h.previous.start!==undefined?h.previous.start:r.start;r.end=h.previous.end!==undefined?h.previous.end:r.end}if(r.end>this.parent.media.currentTime&&r.start<=this.parent.media.currentTime){x=this.parent.data.running[s._natives.type];s._running=false;x.splice(x.indexOf(s),1);if(!this.parent.data.disabled[s._natives.type]){s._natives.end.call(this.parent,null,s);this.parent.emit("trackend",
i.extend({},s,{plugin:s._natives.type,type:"trackend",track:s}))}}};i.addTrackEvent=function(a,h){if(!(h instanceof k)){if((h=new k(h))&&h._natives&&h._natives.type&&a.options.defaults&&a.options.defaults[h._natives.type])h=i.extend({},a.options.defaults[h._natives.type],h);if(h._natives){h._id=h.id||h._id||i.guid(h._natives.type);if(h._natives._setup){h._natives._setup.call(a,h);a.emit("tracksetup",i.extend({},h,{plugin:h._natives.type,type:"tracksetup",track:h}))}}a.data.trackEvents.add(h);this.timeUpdate(a,
null,true);h._id&&i.addTrackEvent.ref(a,h);a.emit("trackadded",i.extend({},h,h._natives?{plugin:h._natives.type}:{},{type:"trackadded",track:h}))}};i.addTrackEvent.ref=function(a,h){a.data.trackRefs[h._id]=h;return a};i.removeTrackEvent=function(a,h){var l=a.getTrackEvent(h);if(l){l._natives._teardown&&l._natives._teardown.call(a,l);a.data.trackEvents.remove(h);i.removeTrackEvent.ref(a,h);l._natives&&a.emit("trackremoved",i.extend({},l,{plugin:l._natives.type,type:"trackremoved",track:l}))}};i.removeTrackEvent.ref=
function(a,h){delete a.data.trackRefs[h];return a};i.getTrackEvents=function(a){var h=[];a=a.data.trackEvents.byStart;for(var l=a.length,e=0,u;e<l;e++){u=a[e];u._id&&h.push(u)}return h};i.getTrackEvents.ref=function(a){return a.data.trackRefs};i.getTrackEvent=function(a,h){return a.data.trackRefs[h]};i.getTrackEvent.ref=function(a,h){return a.data.trackRefs[h]};i.getLastTrackEventId=function(a){return a.data.history[a.data.history.length-1]};i.timeUpdate=function(a,h){var l=a.media.currentTime,e=
a.data.trackEvents.previousUpdateTime,u=a.data.trackEvents,s=u.endIndex,x=u.startIndex,D=u.byStart.length,C=u.byEnd.length,F=i.registryByName,z,n,r;if(e<=l){for(;u.byEnd[s]&&u.byEnd[s].end<=l;){z=u.byEnd[s];n=(e=z._natives)&&e.type;if(!e||F[n]||a[n]){if(z._running===true){z._running=false;r=a.data.running[n];r.splice(r.indexOf(z),1);if(!a.data.disabled[n]){e.end.call(a,h,z);a.emit("trackend",i.extend({},z,{plugin:n,type:"trackend",track:z}))}}s++}else{i.removeTrackEvent(a,z._id);return}}for(;u.byStart[x]&&
u.byStart[x].start<=l;){z=u.byStart[x];n=(e=z._natives)&&e.type;if(!e||F[n]||a[n]){if(z.end>l&&z._running===false){z._running=true;a.data.running[n].push(z);if(!a.data.disabled[n]){e.start.call(a,h,z);a.emit("trackstart",i.extend({},z,{plugin:n,type:"trackstart",track:z}))}}x++}else{i.removeTrackEvent(a,z._id);return}}}else if(e>l){for(;u.byStart[x]&&u.byStart[x].start>l;){z=u.byStart[x];n=(e=z._natives)&&e.type;if(!e||F[n]||a[n]){if(z._running===true){z._running=false;r=a.data.running[n];r.splice(r.indexOf(z),
1);if(!a.data.disabled[n]){e.end.call(a,h,z);a.emit("trackend",i.extend({},z,{plugin:n,type:"trackend",track:z}))}}x--}else{i.removeTrackEvent(a,z._id);return}}for(;u.byEnd[s]&&u.byEnd[s].end>l;){z=u.byEnd[s];n=(e=z._natives)&&e.type;if(!e||F[n]||a[n]){if(z.start<=l&&z._running===false){z._running=true;a.data.running[n].push(z);if(!a.data.disabled[n]){e.start.call(a,h,z);a.emit("trackstart",i.extend({},z,{plugin:n,type:"trackstart",track:z}))}}s--}else{i.removeTrackEvent(a,z._id);return}}}u.endIndex=
s;u.startIndex=x;u.previousUpdateTime=l;u.byStart.length<D&&u.startIndex--;u.byEnd.length<C&&u.endIndex--};i.extend(i.p,{getTrackEvents:function(){return i.getTrackEvents.call(null,this)},getTrackEvent:function(a){return i.getTrackEvent.call(null,this,a)},getLastTrackEventId:function(){return i.getLastTrackEventId.call(null,this)},removeTrackEvent:function(a){i.removeTrackEvent.call(null,this,a);return this},removePlugin:function(a){i.removePlugin.call(null,this,a);return this},timeUpdate:function(a){i.timeUpdate.call(null,
this,a);return this},destroy:function(){i.destroy.call(null,this);return this}});i.manifest={};i.registry=[];i.registryByName={};i.plugin=function(a,h,l){if(i.protect.natives.indexOf(a.toLowerCase())>=0)i.error("'"+a+"' is a protected function name");else{var e=typeof h==="function",u=["start","end","type","manifest"],s=["_setup","_teardown","start","end","frame"],x={},D=function(z,n){z=z||i.nop;n=n||i.nop;return function(){z.apply(this,arguments);n.apply(this,arguments)}};i.manifest[a]=l=l||h.manifest||
{};s.forEach(function(z){h[z]=b(h[z]||i.nop,a)});var C=function(z,n){if(!n)return this;if(n.ranges&&i.isArray(n.ranges)){i.forEach(n.ranges,function(E){E=i.extend({},n,E);delete E.ranges;this[a](E)},this);return this}var r=n._natives={},M="",N;i.extend(r,z);n._natives.type=n._natives.plugin=a;n._running=false;r.start=r.start||r["in"];r.end=r.end||r.out;if(n.once)r.end=D(r.end,function(){this.removeTrackEvent(n._id)});r._teardown=D(function(){var E=o.call(arguments),L=this.data.running[r.type];E.unshift(null);
E[1]._running&&L.splice(L.indexOf(n),1)&&r.end.apply(this,E);this.emit("trackend",i.extend({},n,{plugin:r.type,type:"trackend",track:i.getTrackEvent(this,n.id||n._id)}))},r._teardown);r._teardown=D(r._teardown,function(){this.emit("trackteardown",i.extend({},n,{plugin:a,type:"trackteardown",track:i.getTrackEvent(this,n.id||n._id)}))});n.compose=n.compose||[];if(typeof n.compose==="string")n.compose=n.compose.split(" ");n.effect=n.effect||[];if(typeof n.effect==="string")n.effect=n.effect.split(" ");
n.compose=n.compose.concat(n.effect);n.compose.forEach(function(E){M=i.compositions[E]||{};s.forEach(function(L){r[L]=D(r[L],M[L])})});n._natives.manifest=l;if(!("start"in n))n.start=n["in"]||0;if(!n.end&&n.end!==0)n.end=n.out||Number.MAX_VALUE;if(!t.call(n,"toString"))n.toString=function(){var E=["start: "+n.start,"end: "+n.end,"id: "+(n.id||n._id)];n.target!=null&&E.push("target: "+n.target);return a+" ( "+E.join(", ")+" )"};if(!n.target){N="options"in l&&l.options;n.target=N&&"target"in N&&N.target}if(!n._id&&
n._natives)n._id=i.guid(n._natives.type);if(n instanceof k){if(n._natives){n._id=n.id||n._id||i.guid(n._natives.type);if(n._natives._setup){n._natives._setup.call(this,n);this.emit("tracksetup",i.extend({},n,{plugin:n._natives.type,type:"tracksetup",track:n}))}}this.data.trackEvents.add(n);this.timeUpdate(this,null,true);n._id&&i.addTrackEvent.ref(this,n)}else i.addTrackEvent(this,n);i.forEach(z,function(E,L){u.indexOf(L)===-1&&this.on(L,E)},this);return this};i.p[a]=x[a]=function(z,n){var r,M;if(z&&
!n)n=z;else if(r=this.getTrackEvent(z)){M=n;var N={},E;for(E in r)if(t.call(M,E)&&t.call(r,E))N[E]=r[E];if(r._natives._update){this.data.trackEvents.remove(r);if(t.call(n,"start"))r.start=n.start;if(t.call(n,"end"))r.end=n.end;e&&h.call(this,r);r._natives._update.call(this,r,n);this.data.trackEvents.add(r)}else{i.extend(r,n);r._natives._teardown&&r._natives._teardown.call(this,r);this.data.trackEvents.remove(z,{previous:N});i.removeTrackEvent.ref(this,z);if(e)C.call(this,h.call(this,r),r);else{r._id=
r.id||r._id||i.guid(r._natives.type);if(r._natives&&r._natives._setup){r._natives._setup.call(this,r);this.emit("tracksetup",i.extend({},r,{plugin:r._natives.type,type:"tracksetup",track:r}))}this.data.trackEvents.add(r);this.timeUpdate(this,null,true);i.addTrackEvent.ref(this,r)}this.emit("trackchange",{id:r.id,type:"trackchange",previousValue:N,currentValue:r,track:r});return this}r._natives.type!=="cue"&&this.emit("trackchange",{id:r.id,type:"trackchange",previousValue:N,currentValue:M,track:r});
return this}else n.id=z;this.data.running[a]=this.data.running[a]||[];r=i.extend({},this.options.defaults&&this.options.defaults[a]||{},n);C.call(this,e?h.call(this,r):h,r);return this};l&&i.extend(h,{manifest:l});var F={fn:x[a],definition:h,base:h,parents:[],name:a};i.registry.push(i.extend(x,F,{type:a}));i.registryByName[a]=F;return x}};i.plugin.errors=[];i.plugin.debug=i.version==="35665ff";i.removePlugin=function(a,h){if(!h){h=a;a=i.p;if(i.protect.natives.indexOf(h.toLowerCase())>=0){i.error("'"+
h+"' is a protected function name");return}var l=i.registry.length,e;for(e=0;e<l;e++)if(i.registry[e].name===h){i.registry.splice(e,1);delete i.registryByName[h];delete i.manifest[h];delete a[h];return}}l=a.data.trackEvents.byStart;e=a.data.trackEvents.byEnd;var u=a.data.trackEvents.animating,s,x;s=0;for(x=l.length;s<x;s++){if(l[s]&&l[s]._natives&&l[s]._natives.type===h){l[s]._natives._teardown&&l[s]._natives._teardown.call(a,l[s]);l.splice(s,1);s--;x--;if(a.data.trackEvents.startIndex<=s){a.data.trackEvents.startIndex--;
a.data.trackEvents.endIndex--}}e[s]&&e[s]._natives&&e[s]._natives.type===h&&e.splice(s,1)}s=0;for(x=u.length;s<x;s++)if(u[s]&&u[s]._natives&&u[s]._natives.type===h){u.splice(s,1);s--;x--}};i.compositions={};i.compose=function(a,h,l){i.manifest[a]=l||h.manifest||{};i.compositions[a]=h};i.plugin.effect=i.effect=i.compose;var I=/^(?:\.|#|\[)/;i.dom={debug:false,find:function(a,h){var l=null;h=h||j;if(a){if(!I.test(a)){l=j.getElementById(a);if(l!==null)return l}try{l=h.querySelector(a)}catch(e){if(i.dom.debug)throw Error(e);
}}return l}};var B=/\?/,K={url:"",data:"",dataType:"",success:i.nop,type:"GET",async:true,xhr:function(){return new m.XMLHttpRequest}};i.xhr=function(a){a.dataType=a.dataType&&a.dataType.toLowerCase()||null;if(a.dataType&&(a.dataType==="jsonp"||a.dataType==="script"))i.xhr.getJSONP(a.url,a.success,a.dataType==="script");else{a=i.extend({},K,a);a.ajax=a.xhr();if(a.ajax){if(a.type==="GET"&&a.data){a.url+=(B.test(a.url)?"&":"?")+a.data;a.data=null}a.ajax.open(a.type,a.url,a.async);a.ajax.send(a.data||
null);return i.xhr.httpData(a)}}};i.xhr.httpData=function(a){var h,l=null,e,u=null;a.ajax.onreadystatechange=function(){if(a.ajax.readyState===4){try{l=JSON.parse(a.ajax.responseText)}catch(s){}h={xml:a.ajax.responseXML,text:a.ajax.responseText,json:l};if(!h.xml||!h.xml.documentElement){h.xml=null;try{e=new DOMParser;u=e.parseFromString(a.ajax.responseText,"text/xml");if(!u.getElementsByTagName("parsererror").length)h.xml=u}catch(x){}}if(a.dataType)h=h[a.dataType];a.success.call(a.ajax,h)}};return h};
i.xhr.getJSONP=function(a,h,l){var e=j.head||j.getElementsByTagName("head")[0]||j.documentElement,u=j.createElement("script"),s=false,x=[];x=/(=)\?(?=&|$)|\?\?/;var D,C;if(!l){C=a.match(/(callback=[^&]*)/);if(C!==null&&C.length){x=C[1].split("=")[1];if(x==="?")x="jsonp";D=i.guid(x);a=a.replace(/(callback=[^&]*)/,"callback="+D)}else{D=i.guid("jsonp");if(x.test(a))a=a.replace(x,"$1"+D);x=a.split(/\?(.+)?/);a=x[0]+"?";if(x[1])a+=x[1]+"&";a+="callback="+D}window[D]=function(F){h&&h(F);s=true}}u.addEventListener("load",
function(){l&&h&&h();s&&delete window[D];e.removeChild(u)},false);u.src=a;e.insertBefore(u,e.firstChild)};i.getJSONP=i.xhr.getJSONP;i.getScript=i.xhr.getScript=function(a,h){return i.xhr.getJSONP(a,h,true)};i.util={toSeconds:function(a,h){var l=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,e,u,s;if(typeof a==="number")return a;typeof a==="string"&&!l.test(a)&&i.error("Invalid time format");l=a.split(":");e=l.length-1;u=l[e];if(u.indexOf(";")>-1){u=u.split(";");s=0;if(h&&typeof h==="number")s=parseFloat(u[1],
10)/h;l[e]=parseInt(u[0],10)+s}e=l[0];return{1:parseFloat(e,10),2:parseInt(e,10)*60+parseFloat(l[1],10),3:parseInt(e,10)*3600+parseInt(l[1],10)*60+parseFloat(l[2],10)}[l.length||1]}};i.p.cue=i.p.exec;i.protect={natives:function(a){return Object.keys?Object.keys(a):function(h){var l,e=[];for(l in h)t.call(h,l)&&e.push(l);return e}(a)}(i.p).map(function(a){return a.toLowerCase()})};i.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(a,h){var l=i.p[h];i.p[h]=function(){if(typeof console!==
"undefined"&&console.warn){console.warn("Deprecated method '"+h+"', "+(a==null?"do not use.":"use '"+a+"' instead."));i.p[h]=l}return i.p[a].apply(this,[].slice.call(arguments))}});m.Popcorn=i}else{m.Popcorn={isSupported:false};for(c="byId forEach extend effects error guid sizeOf isArray nop position disable enable destroyaddTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId timeUpdate plugin removePlugin compose effect xhr getJSONP getScript".split(/\s+/);c.length;)m.Popcorn[c.shift()]=
function(){}}})(window,window.document);(function(m,j){function k(c){c=typeof c==="string"?c:[c.language,c.region].join("-");var f=c.split("-");return{iso6391:c,language:f[0]||"",region:f[1]||""}}var d=m.navigator,b=k(d.userLanguage||d.language);j.locale={get:function(){return b},set:function(c){b=k(c);j.locale.broadcast();return b},broadcast:function(c){var f=j.instances,g=f.length,o=0,t;for(c=c||"locale:changed";o<g;o++){t=f[o];c in t.data.events&&t.trigger(c)}}}})(this,this.Popcorn);(function(m){var j=Object.prototype.hasOwnProperty;m.parsers={};m.parser=function(k,d,b){if(m.protect.natives.indexOf(k.toLowerCase())>=0)m.error("'"+k+"' is a protected function name");else{if(typeof d==="function"&&!b){b=d;d=""}if(!(typeof b!=="function"||typeof d!=="string")){var c={};c[k]=function(f,g){if(!f)return this;var o=this;m.xhr({url:f,dataType:d,success:function(t){var p,q,v=0;t=b(t).data||[];if(p=t.length){for(;v<p;v++){q=t[v];for(var w in q)j.call(q,w)&&o[w]&&o[w](q[w])}g&&g()}}});
return this};m.extend(m.p,c);return c}}}})(Popcorn);(function(m){var j=function(k,d){k=k||m.nop;d=d||m.nop;return function(){k.apply(this,arguments);d.apply(this,arguments)}};m.player=function(k,d){if(!m[k]){d=d||{};var b=function(c,f,g){g=g||{};var o=new Date/1E3,t=o,p=0,q=0,v=1,w=false,A={},G=typeof c==="string"?m.dom.find(c):c,y={};Object.prototype.__defineGetter__||(y=G||document.createElement("div"));for(var i in G)if(!(i in y))if(typeof G[i]==="object")y[i]=G[i];else if(typeof G[i]==="function")y[i]=function(B){return"length"in G[B]&&!G[B].call?
G[B]:function(){return G[B].apply(G,arguments)}}(i);else m.player.defineProperty(y,i,{get:function(B){return function(){return G[B]}}(i),set:m.nop,configurable:true});var I=function(){o=new Date/1E3;if(!y.paused){y.currentTime+=o-t;y.dispatchEvent("timeupdate");setTimeout(I,10)}t=o};y.play=function(){this.paused=false;if(y.readyState>=4){t=new Date/1E3;y.dispatchEvent("play");I()}};y.pause=function(){this.paused=true;y.dispatchEvent("pause")};m.player.defineProperty(y,"currentTime",{get:function(){return p},
set:function(B){p=+B;y.dispatchEvent("timeupdate");return p},configurable:true});m.player.defineProperty(y,"volume",{get:function(){return v},set:function(B){v=+B;y.dispatchEvent("volumechange");return v},configurable:true});m.player.defineProperty(y,"muted",{get:function(){return w},set:function(B){w=+B;y.dispatchEvent("volumechange");return w},configurable:true});m.player.defineProperty(y,"readyState",{get:function(){return q},set:function(B){return q=B},configurable:true});y.addEventListener=function(B,
K){A[B]||(A[B]=[]);A[B].push(K);return K};y.removeEventListener=function(B,K){var a,h=A[B];if(h){for(a=A[B].length-1;a>=0;a--)K===h[a]&&h.splice(a,1);return K}};y.dispatchEvent=function(B){var K,a=B.type;if(!a){a=B;if(B=m.events.getInterface(a)){K=document.createEvent(B);K.initEvent(a,true,true,window,1)}}if(A[a])for(B=A[a].length-1;B>=0;B--)A[a][B].call(this,K,this)};y.src=f||"";y.duration=0;y.paused=true;y.ended=0;g&&g.events&&m.forEach(g.events,function(B,K){y.addEventListener(K,B,false)});if(d._canPlayType(G.nodeName,
f)!==false)if(d._setup)d._setup.call(y,g);else{y.readyState=4;y.dispatchEvent("loadedmetadata");y.dispatchEvent("loadeddata");y.dispatchEvent("canplaythrough")}else setTimeout(function(){y.dispatchEvent("error")},0);c=new m.p.init(y,g);if(d._teardown)c.destroy=j(c.destroy,function(){d._teardown.call(y,g)});return c};b.canPlayType=d._canPlayType=d._canPlayType||m.nop;m[k]=m.player.registry[k]=b}};m.player.registry={};m.player.defineProperty=Object.defineProperty||function(k,d,b){k.__defineGetter__(d,
b.get||m.nop);k.__defineSetter__(d,b.set||m.nop)};m.player.playerQueue=function(){var k=[],d=false;return{next:function(){d=false;k.shift();k[0]&&k[0]()},add:function(b){k.push(function(){d=true;b&&b()});!d&&k[0]()}}};m.smart=function(k,d,b){var c=typeof k==="string"?m.dom.find(k):k,f,g,o,t,p,q="HTMLVimeoVideoElement HTMLSoundCloudAudioElement HTMLNullVideoElement".split(" ");if(c){d=typeof d==="string"?[d]:d;k=0;for(p=d.length;k<p;k++){f=d[k];for(g=0;g<q.length;g++)if((t=m[q[g]])&&t._canPlaySrc(f)===
"probably"){o=t(c);d=m(o,b);setTimeout(function(){o.src=f},0);return d}for(var v in m.player.registry)if(m.player.registry.hasOwnProperty(v))if(m.player.registry[v].canPlayType(c.nodeName,f))return m[v](c,f,b)}v=m.guid("popcorn-video-");q='<video id="'+v+'" preload=auto autobuffer>';k=0;for(p=d.length;k<p;k++)q+='<source src="'+d[k]+'">';q+="</video>";c.innerHTML=q;b&&b.events&&b.events.error&&c.addEventListener("error",b.events.error,false);return m("#"+v,b)}else m.error("Specified target `"+k+"` was not found.")}})(Popcorn);(function(m){document.addEventListener("DOMContentLoaded",function(){var j=document.querySelectorAll("[data-timeline-sources]");m.forEach(j,function(k,d){var b=j[d],c,f,g;if(!b.id)b.id=m.guid("__popcorn");if(b.nodeType&&b.nodeType===1){g=m("#"+b.id);c=(b.getAttribute("data-timeline-sources")||"").split(",");c[0]&&m.forEach(c,function(o){f=o.split("!");if(f.length===1){f=o.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");f[0]="parse"+f[1].toUpperCase();f[1]=o}c[0]&&g[f[0]]&&g[f[0]](f[1])});g.autoplay()&&
g.play()}})},false)})(Popcorn);(function(m,j){function k(c){var f=k.options;c=f.parser[f.strictMode?"strict":"loose"].exec(c);for(var g={},o=14;o--;)g[f.key[o]]=c[o]||"";g[f.q.name]={};g[f.key[12]].replace(f.q.parser,function(t,p,q){if(p)g[f.q.name][p]=q});return g}function d(){}k.options={strictMode:false,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var b={length:0,start:m.nop,end:m.nop};MediaError=MediaError||function(){function c(f,g){this.code=f||null;this.message=g||""}c.MEDIA_ERR_NONE_ACTIVE=0;c.MEDIA_ERR_ABORTED=1;c.MEDIA_ERR_NETWORK=2;c.MEDIA_ERR_DECODE=3;c.MEDIA_ERR_NONE_SUPPORTED=4;return c}();d.prototype={_util:{type:"HTML5",TIMEUPDATE_MS:250,
MIN_WIDTH:300,MIN_HEIGHT:150,isAttributeSet:function(c){return typeof c==="string"||c===true},parseUri:k},addEventListener:function(c,f,g){j.addEventListener(this._eventNamespace+c,f,g)},removeEventListener:function(c,f,g){j.removeEventListener(this._eventNamespace+c,f,g)},dispatchEvent:function(c){var f=j.createEvent("CustomEvent");f.initCustomEvent(this._eventNamespace+c,false,false,{type:c,target:this.parentNode,data:null});j.dispatchEvent(f)},load:m.nop,canPlayType:function(){return""},getBoundingClientRect:function(){return this.parentNode.getBoundingClientRect()},
NETWORK_EMPTY:0,NETWORK_IDLE:1,NETWORK_LOADING:2,NETWORK_NO_SOURCE:3,HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4};d.prototype.constructor=d;Object.defineProperties(d.prototype,{currentSrc:{get:function(){return this.src!==undefined?this.src:""}},preload:{get:function(){return"auto"},set:m.nop},controls:{get:function(){return true},set:m.nop},poster:{get:function(){return""},set:m.nop},crossorigin:{get:function(){return""}},played:{get:function(){return b}},
seekable:{get:function(){return b}},buffered:{get:function(){return b}},defaultMuted:{get:function(){return false}},defaultPlaybackRate:{get:function(){return 1}}});m._MediaElementProto=d})(Popcorn,window.document);(function(m,j){function k(){return"maybe"}function d(b,c){var f=typeof b==="string"?j.querySelector(b):b,g=j.createElement(c);f.appendChild(g);g._canPlaySrc=k;return g}m.HTMLVideoElement=function(b){return d(b,"video")};m.HTMLVideoElement._canPlaySrc=k;m.HTMLAudioElement=function(b){return d(b,"audio")};m.HTMLAudioElement._canPlaySrc=k})(Popcorn,window.document);(function(m,j){function k(f){this.currentTime=f.currentTime||0;this.duration=f.duration||NaN;this.playInterval=null;this.ended=f.endedCallback||m.nop}function d(f){function g(B){i.unshift(B)}function o(B){if(A){y.seeking=true;q.dispatchEvent("seeking");G.seekTo(B);y.seeking=false;q.dispatchEvent("timeupdate");q.dispatchEvent("seeked");q.dispatchEvent("canplay");q.dispatchEvent("canplaythrough")}else g(function(){o(B)})}function t(){q.dispatchEvent("timeupdate")}function p(){if(y.loop){o(0);q.play()}else{y.ended=
true;clearInterval(I);q.dispatchEvent("timeupdate");q.dispatchEvent("ended")}}var q=this,v=typeof f==="string"?j.querySelector(f):f,w,A=false,G,y={src:b,networkState:q.NETWORK_EMPTY,readyState:q.HAVE_NOTHING,autoplay:b,preload:b,controls:b,loop:false,poster:b,volume:1,muted:false,width:v.width|0?v.width:q._util.MIN_WIDTH,height:v.height|0?v.height:q._util.MIN_HEIGHT,seeking:false,ended:false,paused:1,error:null},i=[],I;q._eventNamespace=m.guid("HTMLNullVideoElement::");q.parentNode=v;q._util.type=
"NullVideo";q.play=function(){if(A){G.play();if(y.paused===1){y.paused=false;q.dispatchEvent("play");q.dispatchEvent("playing")}else{y.ended&&o(0);if(y.paused){y.paused=false;y.loop||q.dispatchEvent("play");q.dispatchEvent("playing")}}I=setInterval(t,q._util.TIMEUPDATE_MS)}else g(function(){q.play()})};q.pause=function(){if(A){G.pause();y.paused=true;clearInterval(I);q.dispatchEvent("pause")}else g(function(){q.pause()})};Object.defineProperties(q,{src:{get:function(){return y.src},set:function(B){if(B&&
B!==y.src)if(q._canPlaySrc(B)){y.src=B;if(A)if(A&&G){G.pause();G=null;v.removeChild(w);w=null}w=j.createElement("div");w.width=y.width;w.height=y.height;v.appendChild(w);B=c.exec(B);G=new k({currentTime:B[1],duration:B[2],endedCallback:p});q.dispatchEvent("loadstart");q.dispatchEvent("progress");q.dispatchEvent("durationchange");A=true;y.networkState=q.NETWORK_IDLE;y.readyState=q.HAVE_METADATA;q.dispatchEvent("loadedmetadata");q.dispatchEvent("loadeddata");y.readyState=q.HAVE_FUTURE_DATA;q.dispatchEvent("canplay");
y.readyState=q.HAVE_ENOUGH_DATA;q.dispatchEvent("canplaythrough");for(B=i.length;B--;){i[B]();delete i[B]}y.autoplay&&q.play()}else{y.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};q.dispatchEvent("error")}}},autoplay:{get:function(){return y.autoplay},set:function(B){y.autoplay=q._util.isAttributeSet(B)}},loop:{get:function(){return y.loop},set:function(B){y.loop=q._util.isAttributeSet(B)}},width:{get:function(){return w.width},set:function(B){y.width=
B}},height:{get:function(){return w.height},set:function(B){y.height=B}},currentTime:{get:function(){var B;B=A?G.currentTime:0;return B},set:function(B){o(B)}},duration:{get:function(){return G?G.duration:NaN}},ended:{get:function(){return y.ended}},paused:{get:function(){return y.paused}},seeking:{get:function(){return y.seeking}},readyState:{get:function(){return y.readyState}},networkState:{get:function(){return y.networkState}},volume:{get:function(){return y.volume},set:function(B){if(B<0||B>
1)throw"Volume value must be between 0.0 and 1.0";y.volume=B;q.dispatchEvent("volumechange")}},muted:{get:function(){return y.muted},set:function(B){B=q._util.isAttributeSet(B);y.muted=B;q.dispatchEvent("volumechange")}},error:{get:function(){return y.error}}})}var b="",c=/#t=(\d+)?,?(\d+)?/;k.prototype={play:function(){var f=this;this.playInterval=setInterval(function(){if(f.currentTime+0.016>=f.duration){f.currentTime=f.duration;f.pause();f.ended()}else f.currentTime+=0.016},16)},pause:function(){clearInterval(this.playInterval)},
seekTo:function(f){f=f<0?0:f;this.currentTime=f=f>this.duration?this.duration:f}};d.prototype=new m._MediaElementProto;d.prototype.constructor=d;d.prototype._canPlaySrc=function(f){return/#t=\d*,?\d+?/.test(f)?"probably":b};d.prototype.canPlayType=function(f){return f==="video/x-nullvideo"?"probably":b};m.HTMLNullVideoElement=function(f){return new d(f)};m.HTMLNullVideoElement._canPlaySrc=d.prototype._canPlaySrc})(Popcorn,document);(function(m,j,k){function d(){if(!t){m.getScript("//w.soundcloud.com/player/api.js",function(){m.getScript("//connect.soundcloud.com/sdk.js",function(){o=true;SC.initialize({client_id:"PRaNFlda6Bhf5utPjUsptg"});for(var q=p.length;q--;){p[q]();delete p[q]}})});t=true}return o}function b(q){p.unshift(q)}function c(q){function v(E){n.unshift(E)}function w(){z.bind(SC.Widget.Events.LOAD_PROGRESS,function(E){K({type:"loadProgress",data:E.currentPosition/1E3})});z.bind(SC.Widget.Events.PLAY_PROGRESS,function(E){K({type:"playProgress",
data:E.currentPosition/1E3})});z.bind(SC.Widget.Events.PLAY,function(){K({type:"play"})});z.bind(SC.Widget.Events.PAUSE,function(){K({type:"pause"})});z.bind(SC.Widget.Events.SEEK,function(E){K({type:"seek",data:E.currentPosition/1E3})});z.bind(SC.Widget.Events.FINISH,function(){K({type:"finish"})});F=true;z.getDuration(G);u(C.controls)}function A(){z.bind(SC.Widget.Events.LOAD_PROGRESS,function(E){if(E.loadedProgress>0){z.unbind(SC.Widget.Events.LOAD_PROGRESS);z.pause()}});z.bind(SC.Widget.Events.PLAY,
function(){z.unbind(SC.Widget.Events.PLAY);z.bind(SC.Widget.Events.PAUSE,function(){z.unbind(SC.Widget.Events.PAUSE);z.setVolume(100);w()})});z.setVolume(0);z.play()}function G(E){E/=1E3;var L=C.duration;if(L!==E){C.duration=E;s.dispatchEvent("durationchange");if(isNaN(L)){C.networkState=s.NETWORK_IDLE;C.readyState=s.HAVE_METADATA;s.dispatchEvent("loadedmetadata");s.dispatchEvent("loadeddata");C.readyState=s.HAVE_FUTURE_DATA;s.dispatchEvent("canplay");C.readyState=s.HAVE_ENOUGH_DATA;s.dispatchEvent("canplaythrough");
for(E=n.length;E--;){n[E]();delete n[E]}C.paused&&C.autoplay&&s.play()}}}function y(E){if(F){E*=1E3;C.seeking=true;s.dispatchEvent("seeking");z.seekTo(E)}else v(function(){y(E)})}function i(){C.paused=true;clearInterval(r);s.dispatchEvent("pause")}function I(){s.dispatchEvent("timeupdate")}function B(E){C.currentTime=E;E!==N&&s.dispatchEvent("timeupdate");N=E}function K(E){switch(E.type){case "loadProgress":s.dispatchEvent("progress");break;case "playProgress":B(E.data);break;case "play":if(!M){M=
setInterval(a,f);C.loop&&s.dispatchEvent("play")}r=setInterval(I,s._util.TIMEUPDATE_MS);if(C.paused){C.paused=false;C.loop||s.dispatchEvent("play");s.dispatchEvent("playing")}break;case "pause":i();break;case "finish":if(C.loop){y(0);s.play()}else{s.pause();i();C.ended=true;s.dispatchEvent("ended")}break;case "seek":B(E.data);C.ended=false;C.seeking=false;s.dispatchEvent("timeupdate");s.dispatchEvent("seeked");s.dispatchEvent("canplay");s.dispatchEvent("canplaythrough")}}function a(){C.ended||z.getPosition(function(E){B(E/
1E3)})}function h(E){if(s._canPlaySrc(E)){C.src=E;if(F)if(F&&z){clearInterval(M);z.pause();z.unbind(SC.Widget.Events.READY);z.unbind(SC.Widget.Events.LOAD_PROGRESS);z.unbind(SC.Widget.Events.PLAY_PROGRESS);z.unbind(SC.Widget.Events.PLAY);z.unbind(SC.Widget.Events.PAUSE);z.unbind(SC.Widget.Events.SEEK);z.unbind(SC.Widget.Events.FINISH);x.removeChild(D);D=null}if(d()){F=false;SC.get("/resolve",{url:E},function(L){D=k.createElement("iframe");D.id=m.guid("soundcloud-");D.width=C.width;D.height=C.height;
D.frameBorder=0;D.webkitAllowFullScreen=true;D.mozAllowFullScreen=true;D.allowFullScreen=true;u(C.controls);x.appendChild(D);D.onload=function(){D.onload=null;z=SC.Widget(D);z.bind(SC.Widget.Events.READY,A);C.networkState=s.NETWORK_LOADING;s.dispatchEvent("loadstart");s.dispatchEvent("progress")};D.src="http://w.soundcloud.com/player/?url="+L.uri+"&show_artwork=false&buying=false&liking=false&sharing=false&download=false&show_comments=false&show_user=false"})}else b(function(){h(E)})}else{C.error=
{name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};s.dispatchEvent("error")}}function l(E){C.volume=E;if(F){z.setVolume(E);s.dispatchEvent("volumechange")}else v(function(){l(E)})}function e(E){if(F)if(E){C.muted=C.volume;l(0)}else{C.muted=0;l(C.muted)}else{C.muted=E?1:0;v(function(){e(E)})}}function u(E){if(D)if(F){D.style.position="absolute";D.style.visibility=E?"visible":"hidden"}else{D.style.opacity=E?"1":"0";D.style.pointerEvents=E?"auto":"none"}C.controls=
E}if(!j.postMessage)throw"ERROR: HTMLSoundCloudAudioElement requires window.postMessage";var s=this,x=typeof q==="string"?m.dom.find(q):q,D,C={src:g,networkState:s.NETWORK_EMPTY,readyState:s.HAVE_NOTHING,seeking:false,autoplay:g,preload:g,controls:false,loop:false,poster:g,volume:100,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:x.width|0?x.width:s._util.MIN_WIDTH,height:x.height|0?x.height:s._util.MIN_HEIGHT,error:null},F=false,z,n=[],r,M,N=0;s._eventNamespace=m.guid("HTMLSoundCloudAudioElement::");
s.parentNode=x;s._util.type="SoundCloud";s.play=function(){if(F){C.ended&&y(0);z.play()}else v(function(){s.play()})};s.pause=function(){F?z.pause():v(function(){s.pause()})};Object.defineProperties(s,{src:{get:function(){return C.src},set:function(E){E&&E!==C.src&&h(E)}},autoplay:{get:function(){return C.autoplay},set:function(E){C.autoplay=s._util.isAttributeSet(E)}},loop:{get:function(){return C.loop},set:function(E){C.loop=s._util.isAttributeSet(E)}},width:{get:function(){return D.width},set:function(E){C.width=
E}},height:{get:function(){return D.height},set:function(E){C.height=E}},currentTime:{get:function(){return C.currentTime},set:function(E){y(E)}},duration:{get:function(){return C.duration}},ended:{get:function(){return C.ended}},paused:{get:function(){return C.paused}},seeking:{get:function(){return C.seeking}},readyState:{get:function(){return C.readyState}},networkState:{get:function(){return C.networkState}},volume:{get:function(){return(C.muted>0?C.muted:C.volume)/100},set:function(E){if(E<0||
E>1)throw"Volume value must be between 0.0 and 1.0";E*=100;l(E)}},muted:{get:function(){return C.muted>0},set:function(E){e(s._util.isAttributeSet(E))}},error:{get:function(){return C.error}},controls:{get:function(){return C.controls},set:function(E){u(!!E)}}})}var f=16,g="",o=false,t=false,p=[];c.prototype=new m._MediaElementProto;c.prototype._canPlaySrc=function(q){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(soundcloud)/.test(q)?"probably":g};c.prototype.canPlayType=function(q){return q==="audio/x-soundcloud"?
"probably":g};m.HTMLSoundCloudAudioElement=function(q){return new c(q)};m.HTMLSoundCloudAudioElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,window,document);(function(m,j,k){function d(p){var q=this,v=p.src.split("?")[0];if(v.substr(0,2)==="//")v=j.location.protocol+v;"play pause paused seekTo unload getCurrentTime getDuration getVideoEmbedCode getVideoHeight getVideoWidth getVideoUrl getColor setColor setLoop getVolume setVolume addEventListener".split(" ").forEach(function(w){q[w]=function(A){A=JSON.stringify({method:w,value:A});p.contentWindow&&p.contentWindow.postMessage(A,v)}})}function b(p){function q(n){D.unshift(n)}function v(n){var r=e.duration;
if(r!==n){e.duration=n;a.dispatchEvent("durationchange");if(isNaN(r)){e.networkState=a.NETWORK_IDLE;e.readyState=a.HAVE_METADATA;a.dispatchEvent("loadedmetadata");a.dispatchEvent("loadeddata");e.readyState=a.HAVE_FUTURE_DATA;a.dispatchEvent("canplay");e.readyState=a.HAVE_ENOUGH_DATA;a.dispatchEvent("canplaythrough");e.autoplay&&a.play();for(n=D.length;n--;){D[n]();delete D[n]}}}}function w(n){if(u){e.seeking=true;a.dispatchEvent("seeking");x.seekTo(n)}else q(function(){w(n)})}function A(){a.dispatchEvent("timeupdate")}
function G(n){(e.currentTime=n)!==z&&a.dispatchEvent("timeupdate");z=e.currentTime}function y(n){if(n.origin===g){var r;try{r=JSON.parse(n.data)}catch(M){console.warn(M)}if(r.player_id==s)switch(r.event){case "ready":x=new d(l);x.addEventListener("loadProgress");x.addEventListener("pause");x.setVolume(0);x.play();break;case "loadProgress":if(parseFloat(r.data.duration)>0&&!u){u=true;x.pause()}break;case "pause":x.setVolume(1);j.removeEventListener("message",y,false);j.addEventListener("message",i,
false);x.addEventListener("loadProgress");x.addEventListener("playProgress");x.addEventListener("play");x.addEventListener("pause");x.addEventListener("finish");x.addEventListener("seek");x.getDuration();e.networkState=a.NETWORK_LOADING;a.dispatchEvent("loadstart");a.dispatchEvent("progress")}}}function i(n){if(n.origin===g){var r;try{r=JSON.parse(n.data)}catch(M){console.warn(M)}if(r.player_id==s){switch(r.method){case "getCurrentTime":G(parseFloat(r.value));break;case "getDuration":v(parseFloat(r.value));
break;case "getVolume":n=parseFloat(r.value);if(e.volume!==n){e.volume=n;a.dispatchEvent("volumechange")}}switch(r.event){case "loadProgress":a.dispatchEvent("progress");v(parseFloat(r.data.duration));break;case "playProgress":G(parseFloat(r.data.seconds));break;case "play":e.ended&&w(0);if(!F){F=setInterval(I,c);e.loop&&a.dispatchEvent("play")}C=setInterval(A,a._util.TIMEUPDATE_MS);if(e.paused){e.paused=false;e.loop||a.dispatchEvent("play");a.dispatchEvent("playing")}break;case "pause":e.paused=
true;clearInterval(C);a.dispatchEvent("pause");break;case "finish":if(e.loop){w(0);a.play()}else{e.ended=true;a.dispatchEvent("ended")}break;case "seek":G(parseFloat(r.data.seconds));e.seeking=false;a.dispatchEvent("timeupdate");a.dispatchEvent("seeked");a.dispatchEvent("canplay");a.dispatchEvent("canplaythrough");e.paused&&a.pause()}}}}function I(){x.getCurrentTime()}function B(n){e.volume=n;if(u){x.setVolume(n);a.dispatchEvent("volumechange")}else q(function(){B(n)})}function K(n){if(u)if(n){e.muted=
e.volume;B(0)}else{e.muted=0;B(e.muted)}else{e.muted=n?1:0;q(function(){K(n)})}}if(!j.postMessage)throw"ERROR: HTMLVimeoVideoElement requires window.postMessage";var a=this,h=typeof p==="string"?m.dom.find(p):p,l,e={src:f,networkState:a.NETWORK_EMPTY,readyState:a.HAVE_NOTHING,seeking:false,autoplay:f,preload:f,controls:false,loop:false,poster:f,volume:1,muted:0,currentTime:0,duration:NaN,ended:false,paused:true,width:h.width|0?h.width:o,height:h.height|0?h.height:t,error:null},u=false,s=m.guid(),
x,D=[],C,F,z=0;a._eventNamespace=m.guid("HTMLVimeoVideoElement::");a.parentNode=h;a._util.type="Vimeo";a.play=function(){u?x.play():q(function(){a.play()})};a.pause=function(){u?x.pause():q(function(){a.pause()})};Object.defineProperties(a,{src:{get:function(){return e.src},set:function(n){if(n&&n!==e.src)if(a._canPlaySrc(n)){e.src=n;if(u)if(u&&x){clearInterval(F);x.pause();j.removeEventListener("message",i,false);h.removeChild(l);l=null}u=false;n=a._util.parseUri(n);var r=n.queryKey,M,N=["api=1",
"player_id="+s,"title=0","byline=0","portrait=0"];e.loop=r.loop==="1"||e.loop;delete r.loop;e.autoplay=r.autoplay==="1"||e.autoplay;delete r.autoplay;n=g+"/video/"+/\d+$/.exec(n.path)+"?";for(M in r)r.hasOwnProperty(M)&&N.push(encodeURIComponent(M)+"="+encodeURIComponent(r[M]));n+=N.join("&");l=k.createElement("iframe");l.id=s;l.width=e.width;l.height=e.height;l.frameBorder=0;l.webkitAllowFullScreen=true;l.mozAllowFullScreen=true;l.allowFullScreen=true;h.appendChild(l);l.src=n;j.addEventListener("message",
y,false)}else{e.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};a.dispatchEvent("error")}}},autoplay:{get:function(){return e.autoplay},set:function(n){e.autoplay=a._util.isAttributeSet(n)}},loop:{get:function(){return e.loop},set:function(n){e.loop=a._util.isAttributeSet(n)}},width:{get:function(){return l.width},set:function(n){e.width=n}},height:{get:function(){return l.height},set:function(n){e.height=n}},currentTime:{get:function(){return e.currentTime},
set:function(n){w(n)}},duration:{get:function(){return e.duration}},ended:{get:function(){return e.ended}},paused:{get:function(){return e.paused}},seeking:{get:function(){return e.seeking}},readyState:{get:function(){return e.readyState}},networkState:{get:function(){return e.networkState}},volume:{get:function(){return e.muted>0?e.muted:e.volume},set:function(n){if(n<0||n>1)throw"Volume value must be between 0.0 and 1.0";B(n)}},muted:{get:function(){return e.muted>0},set:function(n){K(a._util.isAttributeSet(n))}},
error:{get:function(){return e.error}}})}var c=16,f="",g=j.location.protocol+"//player.vimeo.com",o=300,t=200;b.prototype=new m._MediaElementProto;b.prototype.constructor=b;b.prototype._canPlaySrc=function(p){return/player.vimeo.com\/video\/\d+/.test(p)||/vimeo.com\/\d+/.test(p)?"probably":f};b.prototype.canPlayType=function(p){return p==="video/x-vimeo"?"probably":f};m.HTMLVimeoVideoElement=function(p){return new b(p)};m.HTMLVimeoVideoElement._canPlaySrc=b.prototype._canPlaySrc})(Popcorn,window,
document);(function(m,j,k){function d(){if(!w){var G=k.createElement("script");G.src=(j.location.protocol==="file:"?"http:":"")+"//www.youtube.com/iframe_api";var y=k.getElementsByTagName("script")[0];y.parentNode.insertBefore(G,y);w=true}return v}function b(G){A.unshift(G)}function c(G){function y(H){O.unshift(H)}function i(){M=true}function I(){if(!N){y(function(){I()});return r.duration}var H=r.duration,J=L.getDuration();if(J){if(H!==J){r.duration=J;F.dispatchEvent("durationchange")}}else{if(!P){P=true;
F.play();F.pause()}setTimeout(I,50)}return J}function B(H){var J={name:"MediaError"};switch(H.data){case 2:J.message="Invalid video parameter.";J.code=MediaError.MEDIA_ERR_ABORTED;break;case 5:J.message="The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.";J.code=MediaError.MEDIA_ERR_DECODE;case 100:J.message="Video not found.";J.code=MediaError.MEDIA_ERR_NETWORK;break;case 101:case 150:J.message="Video not usable.";J.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED;
break;default:J.message="Unknown error.";J.code=5}r.error=J;F.dispatchEvent("error")}function K(H){switch(H.data){case -1:L.playVideo();break;case YT.PlayerState.ENDED:if(r.loop){l(0);F.play()}else{r.ended=true;F.dispatchEvent("ended")}break;case YT.PlayerState.PLAYING:if(R){R=false;if(r.autoplay||!r.paused){r.paused=false;y(function(){x()})}else L.pauseVideo();r.readyState=F.HAVE_METADATA;F.dispatchEvent("loadedmetadata");S=setInterval(h,f);F.dispatchEvent("loadeddata");r.readyState=F.HAVE_FUTURE_DATA;
F.dispatchEvent("canplay");N=true;for(H=O.length;H--;){O[H]();delete O[H]}r.readyState=F.HAVE_ENOUGH_DATA;F.dispatchEvent("canplaythrough")}else x();break;case YT.PlayerState.PAUSED:if(!Q){Q=true;clearInterval(T);F.dispatchEvent("pause")}break;case YT.PlayerState.BUFFERING:r.networkState=F.NETWORK_LOADING;F.dispatchEvent("waiting")}}function a(H){if(F._canPlaySrc(H)){r.src=H;if(d()){if(M)if(M&&L){clearInterval(S);L.stopVideo();L.clearVideo();z.removeChild(n);n=null}n=k.createElement("div");n.width=
r.width;n.height=r.height;z.appendChild(n);var J=F._util.parseUri(H).queryKey;delete J.v;r.autoplay=J.autoplay==="1"||r.autoplay;delete J.autoplay;r.loop=J.loop==="1"||r.loop;delete J.loop;J.rel=J.rel||0;J.modestbranding=J.modestbranding||1;J.iv_load_policy=J.iv_load_policy||3;J.showinfo=J.showinfo||0;var U=j.location.protocol==="file:"?"*":j.location.protocol+"//"+j.location.host;J.origin=J.origin||U;J.controls=J.controls||r.controls?2:0;r.controls=J.controls;J.wmode=J.wmode||"transparent";H=p.exec(H)[1];
L=new YT.Player(n,{width:r.width,height:r.height,wmode:J.wmode,videoId:H,playerVars:J,events:{onReady:i,onError:B,onStateChange:K}});r.networkState=F.NETWORK_LOADING;F.dispatchEvent("loadstart");F.dispatchEvent("progress");P=false;I()}else b(function(){a(H)})}else{r.error={name:"MediaError",message:"Media Source Not Supported",code:MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED};F.dispatchEvent("error")}}function h(){var H=L.getCurrentTime();if(r.seeking)q(H-r.currentTime)<1&&s();else{r.currentTime=H;if(q(r.currentTime-
H)>f){u();s()}}}function l(H){r.currentTime=H;if(N){u();L.seekTo(H)}else y(function(){u();L.seekTo(H)})}function e(){F.dispatchEvent("timeupdate")}function u(){r.seeking=true;F.dispatchEvent("seeking")}function s(){r.seeking=false;F.dispatchEvent("timeupdate");F.dispatchEvent("seeked");F.dispatchEvent("canplay");F.dispatchEvent("canplaythrough")}function x(){P=true;r.ended&&l(0);T=setInterval(e,F._util.TIMEUPDATE_MS);if(Q){Q=false;if(r.loop&&!E||!r.loop){E=true;F.dispatchEvent("play")}F.dispatchEvent("playing")}}
function D(H){r.volume=H;if(N){L.setVolume(r.volume*100);F.dispatchEvent("volumechange")}else y(function(){D(r.volume)})}function C(H){r.muted=H;if(N){L[H?"mute":"unMute"]();F.dispatchEvent("volumechange")}else y(function(){C(r.muted)})}if(!j.postMessage)throw"ERROR: HTMLYouTubeVideoElement requires window.postMessage";var F=this,z=typeof G==="string"?k.querySelector(G):G,n,r={src:g,networkState:F.NETWORK_EMPTY,readyState:F.HAVE_NOTHING,seeking:false,autoplay:g,preload:g,controls:false,loop:false,
poster:g,volume:1,muted:false,currentTime:0,duration:NaN,ended:false,paused:true,width:z.width|0?z.width:o,height:z.height|0?z.height:t,error:null},M=false,N=false,E=false,L,Q=true,O=[],S,T,R=true,P=false;F._eventNamespace=m.guid("HTMLYouTubeVideoElement::");F.parentNode=z;F._util.type="YouTube";F.play=function(){r.paused=false;N?L.playVideo():y(function(){F.play()})};F.pause=function(){r.paused=true;N?L.pauseVideo():y(function(){F.pause()})};Object.defineProperties(F,{src:{get:function(){return r.src},
set:function(H){H&&H!==r.src&&a(H)}},autoplay:{get:function(){return r.autoplay},set:function(H){r.autoplay=F._util.isAttributeSet(H)}},loop:{get:function(){return r.loop},set:function(H){r.loop=F._util.isAttributeSet(H)}},width:{get:function(){return n.width},set:function(H){r.width=H}},height:{get:function(){return n.height},set:function(H){r.height=H}},currentTime:{get:function(){return r.currentTime},set:function(H){l(H)}},duration:{get:function(){return I()}},ended:{get:function(){return r.ended}},
paused:{get:function(){return r.paused}},seeking:{get:function(){return r.seeking}},readyState:{get:function(){return r.readyState}},networkState:{get:function(){return r.networkState}},volume:{get:function(){return r.volume/100},set:function(H){if(H<0||H>1)throw"Volume value must be between 0.0 and 1.0";H*=100;D(H)}},muted:{get:function(){return r.muted},set:function(H){C(F._util.isAttributeSet(H))}},error:{get:function(){return r.error}}})}var f=10,g="",o=300,t=200,p=/^.*(?:\/|v=)(.{11})/,q=Math.abs,
v=false,w=false,A=[];if(j.YT){j.quarantineYT=j.YT;j.YT=null}j.onYouTubeIframeAPIReady=function(){v=true;for(var G=A.length;G--;){A[G]();delete A[G]}};c.prototype=new m._MediaElementProto;c.prototype.constructor=c;c.prototype._canPlaySrc=function(G){return/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu)/.test(G)?"probably":g};c.prototype.canPlayType=function(G){return G==="video/x-youtube"?"probably":g};m.HTMLYouTubeVideoElement=function(G){return new c(G)};m.HTMLYouTubeVideoElement._canPlaySrc=c.prototype._canPlaySrc})(Popcorn,
window,document);(function(m){var j=function(k,d){var b=0,c=0,f;m.forEach(d.classes,function(g,o){f=[];if(g==="parent")f[0]=document.querySelectorAll("#"+d.target)[0].parentNode;else f=document.querySelectorAll("#"+d.target+" "+g);b=0;for(c=f.length;b<c;b++)f[b].classList.toggle(o)})};m.compose("applyclass",{manifest:{about:{name:"Popcorn applyclass Effect",version:"0.1",author:"@scottdowne",website:"scottdowne.wordpress.com"},options:{}},_setup:function(k){k.classes={};k.applyclass=k.applyclass||"";for(var d=k.applyclass.replace(/\s/g,
"").split(","),b=[],c=0,f=d.length;c<f;c++){b=d[c].split(":");if(b[0])k.classes[b[0]]=b[1]||""}},start:j,end:j})})(Popcorn);(function(m){m.plugin("code",function(j){var k=false,d=this,b=function(){var c=function(f){return function(g,o){var t=function(){k&&g.call(d,o);k&&f(t)};t()}};return window.webkitRequestAnimationFrame?c(window.webkitRequestAnimationFrame):window.mozRequestAnimationFrame?c(window.mozRequestAnimationFrame):c(function(f){window.setTimeout(f,16)})}();if(!j.onStart||typeof j.onStart!=="function")j.onStart=m.nop;if(j.onEnd&&typeof j.onEnd!=="function")j.onEnd=undefined;if(j.onFrame&&typeof j.onFrame!==
"function")j.onFrame=undefined;return{start:function(c,f){f.onStart.call(d,f);if(f.onFrame){k=true;b(f.onFrame,f)}},end:function(c,f){if(f.onFrame)k=false;f.onEnd&&f.onEnd.call(d,f)}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",
optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(m,j){var k={};m.plugin("documentcloud",{manifest:{about:{name:"Popcorn Document Cloud Plugin",version:"0.1",author:"@humphd, @ChrisDeCairos",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"documentcloud-container",width:{elem:"input",type:"text",label:"Width",optional:true},height:{elem:"input",type:"text",label:"Height",optional:true},src:{elem:"input",type:"url",label:"PDF URL","default":"http://www.documentcloud.org/documents/70050-urbina-day-1-in-progress.html"},
preload:{elem:"input",type:"checkbox",label:"Preload","default":true},page:{elem:"input",type:"number",label:"Page Number",optional:true},aid:{elem:"input",type:"number",label:"Annotation Id",optional:true}}},_setup:function(d){function b(){function p(e){d._key=e.api.getId();d._changeView=function(u){d.aid?u.pageSet.showAnnotation(u.api.getAnnotation(d.aid)):u.api.setCurrentPage(d.page)}}function q(){k[d._key]={num:1,id:d._containerId};f.loaded=true}f.loaded=false;var v=d.url.replace(/\.html$/,".js"),
w=d.target,A=j.getElementById(w),G=j.createElement("div"),y=m.position(A),i=d.width||y.width;y=d.height||y.height;var I=d.sidebar||true,B=d.text||true,K=d.pdf||true,a=d.showAnnotations||true,h=d.zoom||700,l=d.search||true;if(!function(e){var u=false;m.forEach(f.viewers,function(s){if(s.api.getSchema().canonicalURL===e){p(s);s=k[d._key];d._containerId=s.id;s.num+=1;u=true;f.loaded=true}});return u}(d.url)){G.id=d._containerId=m.guid(w);w="#"+G.id;A.appendChild(G);g.trigger("documentready");f.load(v,
{width:i,height:y,sidebar:I,text:B,pdf:K,showAnnotations:a,zoom:h,search:l,container:w,afterLoad:d.page||d.aid?function(e){p(e);d._changeView(e);G.style.visibility="hidden";e.elements.pages.hide();q()}:function(e){p(e);q();G.style.visibility="hidden";e.elements.pages.hide()}})}}function c(){window.DV.loaded?b():setTimeout(c,25)}var f=window.DV=window.DV||{},g=this;if(f.loading)c();else{f.loading=true;f.recordHit="//www.documentcloud.org/pixel.gif";var o=j.createElement("link"),t=j.getElementsByTagName("head")[0];
o.rel="stylesheet";o.type="text/css";o.media="screen";o.href="//s3.documentcloud.org/viewer/viewer-datauri.css";t.appendChild(o);f.loaded=false;m.getScript("http://s3.documentcloud.org/viewer/viewer.js",function(){f.loading=false;b()})}d.toString=function(){return d.src||d._natives.manifest.options.src["default"]}},start:function(d,b){var c=j.getElementById(b._containerId),f=DV.viewers[b._key];(b.page||b.aid)&&f&&b._changeView(f);if(c&&f){c.style.visibility="visible";f.elements.pages.show()}},end:function(d,
b){var c=j.getElementById(b._containerId);if(c&&DV.viewers[b._key]){c.style.visibility="hidden";DV.viewers[b._key].elements.pages.hide()}},_teardown:function(d){var b=j.getElementById(d._containerId);if((d=d._key)&&DV.viewers[d]&&--k[d].num===0){for(DV.viewers[d].api.unload();b.hasChildNodes();)b.removeChild(b.lastChild);b.parentNode.removeChild(b)}}})})(Popcorn,window.document);(function(m){var j=0;m.plugin("flickr",function(k){var d,b=document.getElementById(k.target),c,f,g,o,t=k.numberofimages||4,p=k.height||"50px",q=k.width||"50px",v=k.padding||"5px",w=k.border||"0px";d=document.createElement("div");d.id="flickr"+j;d.style.width="100%";d.style.height="100%";d.style.display="none";j++;b&&b.appendChild(d);var A=function(){if(c)setTimeout(function(){A()},5);else{f="http://api.flickr.com/services/rest/?method=flickr.people.findByUsername&";f+="username="+k.username+"&api_key="+
k.apikey+"&format=json&jsoncallback=flickr";m.getJSONP(f,function(y){c=y.user.nsid;G()})}},G=function(){f="http://api.flickr.com/services/feeds/photos_public.gne?";if(c)f+="id="+c+"&";if(k.tags)f+="tags="+k.tags+"&";f+="lang=en-us&format=json&jsoncallback=flickr";m.xhr.getJSONP(f,function(y){var i=document.createElement("div");i.innerHTML="<p style='padding:"+v+";'>"+y.title+"<p/>";m.forEach(y.items,function(I,B){if(B<t){g=document.createElement("a");g.setAttribute("href",I.link);g.setAttribute("target",
"_blank");o=document.createElement("img");o.setAttribute("src",I.media.m);o.setAttribute("height",p);o.setAttribute("width",q);o.setAttribute("style","border:"+w+";padding:"+v);g.appendChild(o);i.appendChild(g)}else return false});d.appendChild(i)})};if(k.username&&k.apikey)A();else{c=k.userid;G()}k.toString=function(){return k.tags||k.username||"Flickr"};return{start:function(){d.style.display="inline"},end:function(){d.style.display="none"},_teardown:function(y){document.getElementById(y.target)&&
document.getElementById(y.target).removeChild(d)}}},{about:{name:"Popcorn Flickr Plugin",version:"0.2",author:"Scott Downe, Steven Weerdenburg, Annasob",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},userid:{elem:"input",type:"text",label:"User ID",optional:true},tags:{elem:"input",type:"text",label:"Tags"},username:{elem:"input",type:"text",label:"Username",optional:true},apikey:{elem:"input",type:"text",
label:"API Key",optional:true},target:"flickr-container",height:{elem:"input",type:"text",label:"Height","default":"50px",optional:true},width:{elem:"input",type:"text",label:"Width","default":"50px",optional:true},padding:{elem:"input",type:"text",label:"Padding",optional:true},border:{elem:"input",type:"text",label:"Border","default":"5px",optional:true},numberofimages:{elem:"input",type:"number","default":4,label:"Number of Images"}}})})(Popcorn);(function(m){m.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(j){var k=m.dom.find(j.target);j._container=document.createElement("div");j._container.style.display="none";j._container.innerHTML=j.text;k.appendChild(j._container)},
start:function(j,k){k._container.style.display="inline"},end:function(j,k){k._container.style.display="none"},_teardown:function(j){var k=m.dom.find(j.target);k&&k.removeChild(j._container)}})})(Popcorn);(function(m){var j=1,k=false;m.plugin("googlefeed",function(d){var b=function(){var o=false,t=0,p=document.getElementsByTagName("link"),q=p.length,v=document.head||document.getElementsByTagName("head")[0],w=document.createElement("link");if(window.GFdynamicFeedControl)k=true;else m.getScript("//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.js",function(){k=true});for(;t<q;t++)if(p[t].href==="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css")o=true;if(!o){w.type=
"text/css";w.rel="stylesheet";w.href="//www.google.com/uds/solutions/dynamicfeed/gfdynamicfeedcontrol.css";v.insertBefore(w,v.firstChild)}};window.google?b():m.getScript("//www.google.com/jsapi",function(){google.load("feeds","1",{callback:function(){b()}})});var c=document.createElement("div"),f=document.getElementById(d.target),g=function(){if(k)d.feed=new GFdynamicFeedControl(d.url,c,{vertical:d.orientation.toLowerCase()==="vertical"?true:false,horizontal:d.orientation.toLowerCase()==="horizontal"?
true:false,title:d.title=d.title||"Blog"});else setTimeout(function(){g()},5)};if(!d.orientation||d.orientation.toLowerCase()!=="vertical"&&d.orientation.toLowerCase()!=="horizontal")d.orientation="vertical";c.style.display="none";c.id="_feed"+j;c.style.width="100%";c.style.height="100%";j++;f&&f.appendChild(c);g();d.toString=function(){return d.url||d._natives.manifest.options.url["default"]};return{start:function(){c.setAttribute("style","display:inline")},end:function(){c.setAttribute("style",
"display:none")},_teardown:function(o){document.getElementById(o.target)&&document.getElementById(o.target).removeChild(c);delete o.feed}}},{about:{name:"Popcorn Google Feed Plugin",version:"0.1",author:"David Seifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"feed-container",url:{elem:"input",type:"url",label:"Feed URL","default":"http://planet.mozilla.org/rss20.xml"},title:{elem:"input",type:"text",
label:"Title","default":"Planet Mozilla",optional:true},orientation:{elem:"select",options:["Vertical","Horizontal"],label:"Orientation","default":"Vertical",optional:true}}})})(Popcorn);var googleCallback;
(function(m){function j(g,o,t){g=g.type?g.type.toUpperCase():"HYBRID";var p;if(g==="STAMEN-WATERCOLOR"||g==="STAMEN-TERRAIN"||g==="STAMEN-TONER")p=g.replace("STAMEN-","").toLowerCase();t=new google.maps.Map(t,{mapTypeId:p?p:google.maps.MapTypeId[g],mapTypeControlOptions:{mapTypeIds:[]}});p&&t.mapTypes.set(p,new google.maps.StamenMapType(p));t.getDiv().style.display="none";return t}var k=1,d=false,b=false,c,f;googleCallback=function(g){if(typeof google!=="undefined"&&google.maps&&google.maps.Geocoder&&
google.maps.LatLng){c=new google.maps.Geocoder;m.getScript("//maps.stamen.com/js/tile.stamen.js",function(){b=true})}else setTimeout(function(){googleCallback(g)},1)};f=function(){if(document.body){d=true;m.getScript("//maps.google.com/maps/api/js?sensor=false&callback=googleCallback")}else setTimeout(function(){f()},1)};m.plugin("googlemap",function(g){var o,t,p,q=document.getElementById(g.target);g.type=g.type||"ROADMAP";g.zoom=g.zoom||1;g.lat=g.lat||0;g.lng=g.lng||0;d||f();o=document.createElement("div");
o.id="actualmap"+k;o.style.width=g.width||"100%";o.style.height=g.height?g.height:q&&q.clientHeight?q.clientHeight+"px":"100%";k++;q&&q.appendChild(o);var v=function(){if(b){if(o)if(g.location)c.geocode({address:g.location},function(w,A){if(o&&A===google.maps.GeocoderStatus.OK){g.lat=w[0].geometry.location.lat();g.lng=w[0].geometry.location.lng();p=new google.maps.LatLng(g.lat,g.lng);t=j(g,p,o)}});else{p=new google.maps.LatLng(g.lat,g.lng);t=j(g,p,o)}}else setTimeout(function(){v()},5)};v();g.toString=
function(){return g.location||(g.lat&&g.lng?g.lat+", "+g.lng:g._natives.manifest.options.location["default"])};return{start:function(w,A){var G=this,y,i=function(){if(t){A._map=t;t.getDiv().style.display="block";google.maps.event.trigger(t,"resize");t.setCenter(p);if(A.zoom&&typeof A.zoom!=="number")A.zoom=+A.zoom;t.setZoom(A.zoom);if(A.heading&&typeof A.heading!=="number")A.heading=+A.heading;if(A.pitch&&typeof A.pitch!=="number")A.pitch=+A.pitch;if(A.type==="STREETVIEW"){t.setStreetView(y=new google.maps.StreetViewPanorama(o,
{position:p,pov:{heading:A.heading=A.heading||0,pitch:A.pitch=A.pitch||0,zoom:A.zoom}}));var I=function(u,s){var x=google.maps.geometry.spherical.computeHeading;setTimeout(function(){var D=G.media.currentTime;if(typeof A.tween==="object"){for(var C=0,F=u.length;C<F;C++){var z=u[C];if(D>=z.interval*(C+1)/1E3&&(D<=z.interval*(C+2)/1E3||D>=z.interval*F/1E3)){l.setPosition(new google.maps.LatLng(z.position.lat,z.position.lng));l.setPov({heading:z.pov.heading||x(z,u[C+1])||0,zoom:z.pov.zoom||0,pitch:z.pov.pitch||
0})}}I(u,u[0].interval)}else{C=0;for(F=u.length;C<F;C++){z=A.interval;if(D>=z*(C+1)/1E3&&(D<=z*(C+2)/1E3||D>=z*F/1E3)){B.setPov({heading:x(u[C],u[C+1])||0,zoom:A.zoom,pitch:A.pitch||0});B.setPosition(K[C])}}I(K,A.interval)}},s)};if(A.location&&typeof A.tween==="string"){var B=y,K=[],a=new google.maps.DirectionsService,h=new google.maps.DirectionsRenderer(B);a.route({origin:A.location,destination:A.tween,travelMode:google.maps.TravelMode.DRIVING},function(u,s){if(s==google.maps.DirectionsStatus.OK){h.setDirections(u);
for(var x=u.routes[0].overview_path,D=0,C=x.length;D<C;D++)K.push(new google.maps.LatLng(x[D].lat(),x[D].lng()));A.interval=A.interval||1E3;I(K,10)}})}else if(typeof A.tween==="object"){var l=y;a=0;for(var e=A.tween.length;a<e;a++){A.tween[a].interval=A.tween[a].interval||1E3;I(A.tween,10)}}}A.onmaploaded&&A.onmaploaded(A,t)}else setTimeout(function(){i()},13)};i()},end:function(){if(t)t.getDiv().style.display="none"},_teardown:function(w){var A=document.getElementById(w.target);A&&A.removeChild(o);
o=t=p=null;w._map=null}}},{about:{name:"Popcorn Google Map Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"start",label:"Start"},end:{elem:"input",type:"start",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","STREETVIEW","HYBRID","TERRAIN","STAMEN-WATERCOLOR","STAMEN-TERRAIN","STAMEN-TONER"],label:"Map Type",optional:true},zoom:{elem:"input",type:"text",label:"Zoom","default":0,optional:true},lat:{elem:"input",
type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location","default":"Toronto, Ontario, Canada"},heading:{elem:"input",type:"text",label:"Heading","default":0,optional:true},pitch:{elem:"input",type:"text",label:"Pitch","default":1,optional:true}}})})(Popcorn);(function(m){function j(b){function c(){var t=b.getBoundingClientRect(),p=g.getBoundingClientRect();if(p.left!==t.left)g.style.left=t.left+"px";if(p.top!==t.top)g.style.top=t.top+"px"}var f=-1,g=document.createElement("div"),o=getComputedStyle(b).zIndex;g.setAttribute("data-popcorn-helper-container",true);g.style.position="absolute";g.style.zIndex=isNaN(o)?k:o+1;document.body.appendChild(g);return{element:g,start:function(){f=setInterval(c,d)},stop:function(){clearInterval(f);f=-1},destroy:function(){document.body.removeChild(g);
f!==-1&&clearInterval(f)}}}var k=2E3,d=10;m.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Image URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},href:{elem:"input",type:"url",label:"Link","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",
optional:true},target:"image-container",text:{elem:"input",type:"text",label:"Caption","default":"Popcorn.js",optional:true}}},_setup:function(b){var c=document.createElement("img"),f=document.getElementById(b.target);b.anchor=document.createElement("a");b.anchor.style.position="relative";b.anchor.style.textDecoration="none";b.anchor.style.display="none";if(f)if(["VIDEO","AUDIO"].indexOf(f.nodeName)>-1){b.trackedContainer=j(f);b.trackedContainer.element.appendChild(b.anchor)}else f&&f.appendChild(b.anchor);
c.addEventListener("load",function(){c.style.borderStyle="none";b.anchor.href=b.href||b.src||"#";b.anchor.target="_blank";var g,o;c.style.height=f.style.height;c.style.width=f.style.width;b.anchor.appendChild(c);if(b.text){g=c.height/12+"px";o=document.createElement("div");m.extend(o.style,{color:"black",fontSize:g,fontWeight:"bold",position:"relative",textAlign:"center",width:c.style.width||c.width+"px",zIndex:"10"});o.innerHTML=b.text||"";o.style.top=(c.style.height.replace("px","")||c.height)/
2-o.offsetHeight/2+"px";b.anchor.insertBefore(o,c)}},false);c.src=b.src;b.toString=function(){var g=b.src||b._natives.manifest.options.src["default"],o=g.replace(/.*\//g,"");return o.length?o:g}},start:function(b,c){c.anchor.style.display="inline";c.trackedContainer&&c.trackedContainer.start()},end:function(b,c){c.anchor.style.display="none";c.trackedContainer&&c.trackedContainer.stop()},_teardown:function(b){if(b.trackedContainer)b.trackedContainer.destroy();else b.anchor.parentNode&&b.anchor.parentNode.removeChild(b.anchor)}})})(Popcorn);(function(m){var j=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(youtu|vimeo|soundcloud|baseplayer)/,k={},d={vimeo:false,youtube:false,soundcloud:false,module:false};Object.defineProperty(k,void 0,{get:function(){return d[void 0]},set:function(b){d[void 0]=b}});m.plugin("mediaspawner",{manifest:{about:{name:"Popcorn Media Spawner Plugin",version:"0.1",author:"Matthew Schranz, @mjschranz",website:"mschranz.wordpress.com"},options:{source:{elem:"input",type:"text",label:"Media Source","default":"http://www.youtube.com/watch?v=CXDstfD9eJ0"},
caption:{elem:"input",type:"text",label:"Media Caption","default":"Popcorn Popping",optional:true},target:"mediaspawner-container",start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},autoplay:{elem:"input",type:"checkbox",label:"Autoplay Video",optional:true},width:{elem:"input",type:"number",label:"Media Width","default":400,units:"px",optional:true},height:{elem:"input",type:"number",label:"Media Height","default":200,units:"px",optional:true}}},_setup:function(b){function c(){function q(){if(o!==
"HTML5"&&!window.Popcorn[o])setTimeout(function(){q()},300);else{b.id=b._container.id;b._container.style.width=b.width+"px";b._container.style.height=b.height+"px";b.popcorn=m.smart("#"+b.id,b.source);o==="HTML5"&&b.popcorn.controls(true);b._container.style.width="0px";b._container.style.height="0px";b._container.style.visibility="hidden";b._container.style.overflow="hidden"}}if(o!=="HTML5"&&!window.Popcorn[o]&&!k[o]){k[o]=true;m.getScript("http://popcornjs.org/code/players/"+o+"/popcorn."+o+".js",
function(){q()})}else q()}function f(){window.Popcorn.player?c():setTimeout(function(){f()},300)}var g=document.getElementById(b.target)||{},o,t,p;if(t=j.exec(b.source)){o=t[1];if(o==="youtu")o="youtube"}else o="HTML5";b._type=o;b._container=document.createElement("div");t=b._container;t.id="mediaSpawnerdiv-"+m.guid();b.width=b.width||400;b.height=b.height||200;if(b.caption){p=document.createElement("div");p.innerHTML=b.caption;p.style.display="none";b._capCont=p;t.appendChild(p)}g&&g.appendChild(t);
if(!window.Popcorn.player&&!k.module){k.module=true;m.getScript("http://popcornjs.org/code/modules/player/popcorn.player.js",f)}else f();b.toString=function(){return b.source||b._natives.manifest.options.source["default"]}},start:function(b,c){if(c._capCont)c._capCont.style.display="";c._container.style.width=c.width+"px";c._container.style.height=c.height+"px";c._container.style.visibility="visible";c._container.style.overflow="visible";c.autoplay&&c.popcorn.play()},end:function(b,c){if(c._capCont)c._capCont.style.display=
"none";c._container.style.width="0px";c._container.style.height="0px";c._container.style.visibility="hidden";c._container.style.overflow="hidden";c.popcorn.pause()},_teardown:function(b){b.popcorn&&b.popcorn.destory&&b.popcorn.destroy();document.getElementById(b.target)&&document.getElementById(b.target).removeChild(b._container)}})})(Popcorn,this);(function(m){m.plugin("mustache",function(j){var k,d,b,c;m.getScript("http://mustache.github.com/extras/mustache.js");var f=!!j.dynamic,g=typeof j.template,o=typeof j.data,t=document.getElementById(j.target);j.container=t||document.createElement("div");if(g==="function")if(f)b=j.template;else c=j.template(j);else c=g==="string"?j.template:"";if(o==="function")if(f)k=j.data;else d=j.data(j);else d=o==="string"?JSON.parse(j.data):o==="object"?j.data:"";return{start:function(p,q){var v=function(){if(window.Mustache){if(k)d=
k(q);if(b)c=b(q);var w=Mustache.to_html(c,d).replace(/^\s*/mg,"");q.container.innerHTML=w}else setTimeout(function(){v()},10)};v()},end:function(p,q){q.container.innerHTML=""},_teardown:function(){k=d=b=c=null}}},{about:{name:"Popcorn Mustache Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"mustache-container",template:{elem:"input",type:"text",
label:"Template"},data:{elem:"input",type:"text",label:"Data"},dynamic:{elem:"input",type:"checkbox",label:"Dynamic","default":true}}})})(Popcorn);(function(m){function j(d,b){if(d.map)d.map.div.style.display=b;else setTimeout(function(){j(d,b)},10)}var k=1;m.plugin("openmap",function(d){var b,c,f,g,o,t,p,q,v=document.getElementById(d.target);b=document.createElement("div");b.id="openmapdiv"+k;b.style.width="100%";b.style.height="100%";k++;v&&v.appendChild(b);q=function(){if(window.OpenLayers&&window.OpenLayers.Layer.Stamen){if(d.location){location=new OpenLayers.LonLat(0,0);m.getJSONP("//tinygeocoder.com/create-api.php?q="+d.location+"&callback=jsonp",
function(A){c=new OpenLayers.LonLat(A[1],A[0])})}else c=new OpenLayers.LonLat(d.lng,d.lat);d.type=d.type||"ROADMAP";switch(d.type){case "SATELLITE":d.map=new OpenLayers.Map({div:b,maxResolution:0.28125,tileSize:new OpenLayers.Size(512,512)});var w=new OpenLayers.Layer.WorldWind("LANDSAT","//worldwind25.arc.nasa.gov/tile/tile.aspx",2.25,4,{T:"105"});d.map.addLayer(w);g=new OpenLayers.Projection("EPSG:4326");f=new OpenLayers.Projection("EPSG:4326");break;case "TERRAIN":g=new OpenLayers.Projection("EPSG:4326");
f=new OpenLayers.Projection("EPSG:4326");d.map=new OpenLayers.Map({div:b,projection:f});w=new OpenLayers.Layer.WMS("USGS Terraserver","//terraserver-usa.org/ogcmap.ashx?",{layers:"DRG"});d.map.addLayer(w);break;case "STAMEN-TONER":case "STAMEN-WATERCOLOR":case "STAMEN-TERRAIN":w=d.type.replace("STAMEN-","").toLowerCase();w=new OpenLayers.Layer.Stamen(w);g=new OpenLayers.Projection("EPSG:4326");f=new OpenLayers.Projection("EPSG:900913");c=c.transform(g,f);d.map=new OpenLayers.Map({div:b,projection:f,
displayProjection:g,controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanPanel,new OpenLayers.Control.ZoomPanel]});d.map.addLayer(w);break;default:f=new OpenLayers.Projection("EPSG:900913");g=new OpenLayers.Projection("EPSG:4326");c=c.transform(g,f);d.map=new OpenLayers.Map({div:b,projection:f,displayProjection:g});w=new OpenLayers.Layer.OSM;d.map.addLayer(w)}if(d.map){d.map.setCenter(c,d.zoom||10);d.map.div.style.display="none"}}else setTimeout(function(){q()},50)};q();return{_setup:function(w){window.OpenLayers||
m.getScript("//openlayers.org/api/OpenLayers.js",function(){m.getScript("//maps.stamen.com/js/tile.stamen.js")});var A=function(){if(w.map){w.zoom=w.zoom||2;if(w.zoom&&typeof w.zoom!=="number")w.zoom=+w.zoom;w.map.setCenter(c,w.zoom);if(w.markers){var G=OpenLayers.Util.extend({},OpenLayers.Feature.Vector.style["default"]),y=function(e){clickedFeature=e.feature;if(clickedFeature.attributes.text){p=new OpenLayers.Popup.FramedCloud("featurePopup",clickedFeature.geometry.getBounds().getCenterLonLat(),
new OpenLayers.Size(120,250),clickedFeature.attributes.text,null,true,function(){t.unselect(this.feature)});clickedFeature.popup=p;p.feature=clickedFeature;w.map.addPopup(p)}},i=function(e){feature=e.feature;if(feature.popup){p.feature=null;w.map.removePopup(feature.popup);feature.popup.destroy();feature.popup=null}},I=function(e){m.getJSONP("//tinygeocoder.com/create-api.php?q="+e.location+"&callback=jsonp",function(u){u=(new OpenLayers.Geometry.Point(u[1],u[0])).transform(g,f);var s=OpenLayers.Util.extend({},
G);if(!e.size||isNaN(e.size))e.size=14;s.pointRadius=e.size;s.graphicOpacity=1;s.externalGraphic=e.icon;u=new OpenLayers.Feature.Vector(u,null,s);if(e.text)u.attributes={text:e.text};o.addFeatures([u])})};o=new OpenLayers.Layer.Vector("Point Layer",{style:G});w.map.addLayer(o);for(var B=0,K=w.markers.length;B<K;B++){var a=w.markers[B];if(a.text)if(!t){t=new OpenLayers.Control.SelectFeature(o);w.map.addControl(t);t.activate();o.events.on({featureselected:y,featureunselected:i})}if(a.location)I(a);
else{var h=(new OpenLayers.Geometry.Point(a.lng,a.lat)).transform(g,f),l=OpenLayers.Util.extend({},G);if(!a.size||isNaN(a.size))a.size=14;l.pointRadius=a.size;l.graphicOpacity=1;l.externalGraphic=a.icon;h=new OpenLayers.Feature.Vector(h,null,l);if(a.text)h.attributes={text:a.text};o.addFeatures([h])}}}}else setTimeout(function(){A()},13)};A()},start:function(w,A){j(A,"block")},end:function(w,A){j(A,"none")},_teardown:function(){v&&v.removeChild(b);b=map=c=f=g=o=t=p=null}}},{about:{name:"Popcorn OpenMap Plugin",
version:"0.3",author:"@mapmeld",website:"mapadelsur.blogspot.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"map-container",type:{elem:"select",options:["ROADMAP","SATELLITE","TERRAIN"],label:"Map Type",optional:true},zoom:{elem:"input",type:"number",label:"Zoom","default":2},lat:{elem:"input",type:"text",label:"Lat",optional:true},lng:{elem:"input",type:"text",label:"Lng",optional:true},location:{elem:"input",type:"text",label:"Location",
"default":"Toronto, Ontario, Canada"},markers:{elem:"input",type:"text",label:"List Markers",optional:true}}})})(Popcorn);document.addEventListener("click",function(m){m=m.target;if(m.nodeName==="A"||m.parentNode&&m.parentNode.nodeName==="A")Popcorn.instances.forEach(function(j){j.options.pauseOnLinkClicked&&j.pause()})},false);(function(m){var j=0,k=function(d,b){var c=d.container=document.createElement("div"),f=c.style,g=d.media,o=function(){var t=d.position();f.fontSize="18px";f.width=g.offsetWidth+"px";f.top=t.top+g.offsetHeight-c.offsetHeight-40+"px";f.left=t.left+"px";setTimeout(o,10)};c.id=b||m.guid();f.position="absolute";f.color="white";f.textShadow="black 2px 2px 6px";f.fontWeight="bold";f.textAlign="center";o();d.media.parentNode.appendChild(c);return c};m.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",
version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"Start"},end:{elem:"input",type:"text",label:"End"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(d){var b=document.createElement("div");b.id="subtitle-"+j++;b.style.display="none";!this.container&&(!d.target||d.target==="subtitle-container")&&k(this);d.container=d.target&&d.target!=="subtitle-container"?document.getElementById(d.target)||
k(this,d.target):this.container;document.getElementById(d.container.id)&&document.getElementById(d.container.id).appendChild(b);d.innerContainer=b;d.showSubtitle=function(){d.innerContainer.innerHTML=d.text||""}},start:function(d,b){b.innerContainer.style.display="inline";b.showSubtitle(b,b.text)},end:function(d,b){b.innerContainer.style.display="none";b.innerContainer.innerHTML=""},_teardown:function(d){d.container.removeChild(d.innerContainer)}})})(Popcorn);(function(m){function j(b){return String(b).replace(/&(?!\w+;)|[<>"']/g,function(c){return d[c]||c})}function k(b,c){var f=b.container=document.createElement("div"),g=f.style,o=b.media,t=function(){var p=b.position();g.fontSize="18px";g.width=o.offsetWidth+"px";g.top=p.top+o.offsetHeight-f.offsetHeight-40+"px";g.left=p.left+"px";setTimeout(t,10)};f.id=c||"";g.position="absolute";g.color="white";g.textShadow="black 2px 2px 6px";g.fontWeight="bold";g.textAlign="center";t();b.media.parentNode.appendChild(f);
return f}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};m.plugin("text",{manifest:{about:{name:"Popcorn Text Plugin",version:"0.1",author:"@humphd"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},escape:{elem:"input",type:"checkbox",label:"Escape"},multiline:{elem:"input",type:"checkbox",label:"Multiline"}}},_setup:function(b){var c,f,g=b._container=document.createElement("div");
g.style.display="none";if(b.target)if(c=m.dom.find(b.target)){if(["VIDEO","AUDIO"].indexOf(c.nodeName)>-1)c=k(this,b.target+"-overlay")}else c=k(this,b.target);else c=this.container?this.container:k(this);b._target=c;f=b.escape?j(b.text):b.text;f=b.multiline?f.replace(/\r?\n/gm,"<br>"):f;g.innerHTML=f||"";c.appendChild(g);b.toString=function(){return b.text||b._natives.manifest.options.text["default"]}},start:function(b,c){c._container.style.display="inline"},end:function(b,c){c._container.style.display=
"none"},_teardown:function(b){var c=b._target;c&&c.removeChild(b._container)}})})(Popcorn);(function(m){var j=1;m.plugin("timeline",function(k){var d=document.getElementById(k.target),b=document.createElement("div"),c,f=true;if(d&&!d.firstChild){d.appendChild(c=document.createElement("div"));c.style.width="inherit";c.style.height="inherit";c.style.overflow="auto"}else c=d.firstChild;b.style.display="none";b.id="timelineDiv"+j;k.direction=k.direction||"up";if(k.direction.toLowerCase()==="down")f=false;if(d&&c)f?c.insertBefore(b,c.firstChild):c.appendChild(b);j++;b.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+
k.title+"</span><br /><span id='mid' style='font-size: 16px;'>"+k.text+"</span><br />"+k.innerHTML;return{start:function(g,o){b.style.display="block";if(o.direction==="down")c.scrollTop=c.scrollHeight},end:function(){b.style.display="none"},_teardown:function(){c&&b&&c.removeChild(b)&&!c.firstChild&&d.removeChild(c)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},
end:{elem:"input",type:"number",label:"End"},target:"feed-container",title:{elem:"input",type:"text",label:"Title"},text:{elem:"input",type:"text",label:"Text"},innerHTML:{elem:"input",type:"text",label:"HTML Code",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"Direction",optional:true}}})})(Popcorn);(function(m){var j=false;m.plugin("twitter",{manifest:{about:{name:"Popcorn Twitter Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"text",label:"Tweet Source (# or @)","default":"@popcornjs"},target:"twitter-container",height:{elem:"input",type:"number",label:"Height","default":"200",optional:true},width:{elem:"input",type:"number",label:"Width",
"default":"250",optional:true}}},_setup:function(k){if(!window.TWTR&&!j){j=true;m.getScript("//widgets.twimg.com/j/2/widget.js")}var d=document.getElementById(k.target);k.container=document.createElement("div");k.container.setAttribute("id",m.guid());k.container.style.display="none";d&&d.appendChild(k.container);var b=k.src||"";d=k.width||250;var c=k.height||200,f=/^@/.test(b),g={version:2,id:k.container.getAttribute("id"),rpp:30,width:d,height:c,interval:6E3,theme:{shell:{background:"#ffffff",color:"#000000"},
tweets:{background:"#ffffff",color:"#444444",links:"#1985b5"}},features:{loop:true,timestamp:true,avatars:true,hashtags:true,toptweets:true,live:true,scrollbar:false,behavior:"default"}},o=function(t){if(window.TWTR)if(f){g.type="profile";(new TWTR.Widget(g)).render().setUser(b).start()}else{g.type="search";g.search=b;g.subject=b;(new TWTR.Widget(g)).render().start()}else setTimeout(function(){o(t)},1)};k.toString=function(){return k.src||k._natives.manifest.options.src["default"]};o(this)},start:function(k,
d){d.container.style.display="inline"},end:function(k,d){d.container.style.display="none"},_teardown:function(k){document.getElementById(k.target)&&document.getElementById(k.target).removeChild(k.container)}})})(Popcorn);(function(m){m.plugin("webpage",{manifest:{about:{name:"Popcorn Webpage Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{id:{elem:"input",type:"text",label:"Id",optional:true},start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},src:{elem:"input",type:"url",label:"Webpage URL","default":"http://mozillapopcorn.org"},target:"iframe-container"}},_setup:function(j){var k=document.getElementById(j.target);j.src=j.src.replace(/^(https?:)?(\/\/)?/,
"//");j._iframe=document.createElement("iframe");j._iframe.setAttribute("width","100%");j._iframe.setAttribute("height","100%");j._iframe.id=j.id;j._iframe.src=j.src;j._iframe.style.display="none";k&&k.appendChild(j._iframe)},start:function(j,k){k._iframe.src=k.src;k._iframe.style.display="inline"},end:function(j,k){k._iframe.style.display="none"},_teardown:function(j){document.getElementById(j.target)&&document.getElementById(j.target).removeChild(j._iframe)}})})(Popcorn);var wikiCallback;
(function(m){m.plugin("wikipedia",{manifest:{about:{name:"Popcorn Wikipedia Plugin",version:"0.1",author:"@annasob",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"number",label:"Start"},end:{elem:"input",type:"number",label:"End"},lang:{elem:"input",type:"text",label:"Language","default":"english",optional:true},src:{elem:"input",type:"url",label:"Wikipedia URL","default":"http://en.wikipedia.org/wiki/Cat"},title:{elem:"input",type:"text",label:"Title","default":"Cats",optional:true},
numberofwords:{elem:"input",type:"number",label:"Number of Words","default":"200",optional:true},target:"wikipedia-container"}},_setup:function(j){var k,d=m.guid();if(!j.lang)j.lang="en";j.numberofwords=j.numberofwords||200;window["wikiCallback"+d]=function(b){j._link=document.createElement("a");j._link.setAttribute("href",j.src);j._link.setAttribute("target","_blank");j._link.innerHTML=j.title||b.parse.displaytitle;j._desc=document.createElement("p");k=b.parse.text["*"].substr(b.parse.text["*"].indexOf("<p>"));
k=k.replace(/((<(.|\n)+?>)|(\((.*?)\) )|(\[(.*?)\]))/g,"");k=k.split(" ");j._desc.innerHTML=k.slice(0,k.length>=j.numberofwords?j.numberofwords:k.length).join(" ")+" ...";j._fired=true};j.src&&m.getScript("//"+j.lang+".wikipedia.org/w/api.php?action=parse&props=text&redirects&page="+j.src.slice(j.src.lastIndexOf("/")+1)+"&format=json&callback=wikiCallback"+d);j.toString=function(){return j.src||j._natives.manifest.options.src["default"]}},start:function(j,k){var d=function(){if(k._fired){if(k._link&&
k._desc)if(document.getElementById(k.target)){document.getElementById(k.target).appendChild(k._link);document.getElementById(k.target).appendChild(k._desc);k._added=true}}else setTimeout(function(){d()},13)};d()},end:function(j,k){if(k._added){document.getElementById(k.target).removeChild(k._link);document.getElementById(k.target).removeChild(k._desc)}},_teardown:function(j){if(j._added){j._link.parentNode&&document.getElementById(j.target).removeChild(j._link);j._desc.parentNode&&document.getElementById(j.target).removeChild(j._desc);
delete j.target}}})})(Popcorn);(function(m){var j={},k=0,d=document.createElement("span"),b=["webkit","Moz","ms","O",""],c=["Transform","TransitionDuration","TransitionTimingFunction"],f={},g;document.getElementsByTagName("head")[0].appendChild(d);for(var o=0,t=c.length;o<t;o++)for(var p=0,q=b.length;p<q;p++){g=b[p]+c[o];if(g in d.style){f[c[o].toLowerCase()]=g;break}}document.getElementsByTagName("head")[0].appendChild(d);m.plugin("wordriver",{manifest:{about:{name:"Popcorn WordRiver Plugin"},options:{start:{elem:"input",type:"number",
label:"Start"},end:{elem:"input",type:"number",label:"End"},target:"wordriver-container",text:{elem:"input",type:"text",label:"Text","default":"Popcorn.js"},color:{elem:"input",type:"text",label:"Color","default":"Green",optional:true}}},_setup:function(v){v._duration=v.end-v.start;var w;if(!(w=j[v.target])){w=v.target;j[w]=document.createElement("div");var A=document.getElementById(w);A&&A.appendChild(j[w]);j[w].style.height="100%";j[w].style.position="relative";w=j[w]}v._container=w;v.word=document.createElement("span");
v.word.style.position="absolute";v.word.style.whiteSpace="nowrap";v.word.style.opacity=0;v.word.style.MozTransitionProperty="opacity, -moz-transform";v.word.style.webkitTransitionProperty="opacity, -webkit-transform";v.word.style.OTransitionProperty="opacity, -o-transform";v.word.style.transitionProperty="opacity, transform";v.word.style[f.transitionduration]="1s, "+v._duration+"s";v.word.style[f.transitiontimingfunction]="linear";v.word.innerHTML=v.text;v.word.style.color=v.color||"black"},start:function(v,
w){w._container.appendChild(w.word);w.word.style[f.transform]="";w.word.style.fontSize=~~(30+20*Math.random())+"px";k%=w._container.offsetWidth-w.word.offsetWidth;w.word.style.left=k+"px";k+=w.word.offsetWidth+10;w.word.style[f.transform]="translateY("+(w._container.offsetHeight-w.word.offsetHeight)+"px)";w.word.style.opacity=1;setTimeout(function(){w.word.style.opacity=0},(w.end-w.start-1||1)*1E3)},end:function(v,w){w.word.style.opacity=0},_teardown:function(v){var w=document.getElementById(v.target);
v.word.parentNode&&v._container.removeChild(v.word);j[v.target]&&!j[v.target].childElementCount&&w&&w.removeChild(j[v.target])&&delete j[v.target]}})})(Popcorn);(function(m){m.parser("parseJSON","JSON",function(j){var k={title:"",remote:"",data:[]};m.forEach(j.data,function(d){k.data.push(d)});return k})})(Popcorn);(function(m){m.parser("parseSBV",function(j){var k={title:"",remote:"",data:[]},d=[],b=0,c=0,f=function(v){v=v.split(":");var w=v.length-1,A;try{A=parseInt(v[w-1],10)*60+parseFloat(v[w],10);if(w===2)A+=parseInt(v[0],10)*3600}catch(G){throw"Bad cue";}return A},g=function(v,w){var A={};A[v]=w;return A};j=j.text.split(/(?:\r\n|\r|\n)/gm);for(c=j.length;b<c;){var o={},t=[],p=j[b++].split(",");try{o.start=f(p[0]);for(o.end=f(p[1]);b<c&&j[b];)t.push(j[b++]);o.text=t.join("<br />");d.push(g("subtitle",o))}catch(q){for(;b<
c&&j[b];)b++}for(;b<c&&!j[b];)b++}k.data=d;return k})})(Popcorn);(function(m){function j(d,b){var c={};c[d]=b;return c}function k(d){d=d.split(":");try{var b=d[2].split(",");if(b.length===1)b=d[2].split(".");return parseFloat(d[0],10)*3600+parseFloat(d[1],10)*60+parseFloat(b[0],10)+parseFloat(b[1],10)/1E3}catch(c){return 0}}m.parser("parseSRT",function(d){var b={title:"",remote:"",data:[]},c=[],f=0,g=0,o,t,p,q;d=d.text.split(/(?:\r\n|\r|\n)/gm);for(f=d.length-1;f>=0&&!d[f];)f--;p=f+1;for(f=0;f<p;f++){q={};t=[];q.id=parseInt(d[f++],10);o=d[f++].split(/[\t ]*--\>[\t ]*/);
q.start=k(o[0]);g=o[1].indexOf(" ");if(g!==-1)o[1]=o[1].substr(0,g);for(q.end=k(o[1]);f<p&&d[f];)t.push(d[f++]);q.text=t.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");q.text=q.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");q.text=q.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");q.text=q.text.replace(/\\N/gi,"<br />");c.push(j("subtitle",q))}b.data=c;return b})})(Popcorn);(function(m){function j(b,c){var f=b.substr(10).split(","),g;g={start:k(f[c.start]),end:k(f[c.end])};if(g.start===-1||g.end===-1)throw"Invalid time";var o=v.call(p,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),t=o.replace,p;p=f.length;v=[];for(var q=c.text;q<p;q++)v.push(f[q]);p=v.join(",");var v=p.replace;g.text=t.call(o,/\\N/gi,"<br />");return g}function k(b){var c=b.split(":");if(b.length!==10||c.length<3)return-1;return parseInt(c[0],10)*3600+parseInt(c[1],10)*60+parseFloat(c[2],10)}function d(b,
c){var f={};f[b]=c;return f}m.parser("parseSSA",function(b){var c={title:"",remote:"",data:[]},f=[],g=0,o;b=b.text.split(/(?:\r\n|\r|\n)/gm);for(o=b.length;g<o&&b[g]!=="[Events]";)g++;var t=b[++g].substr(8).split(", "),p={},q,v;v=0;for(q=t.length;v<q;v++)if(t[v]==="Start")p.start=v;else if(t[v]==="End")p.end=v;else if(t[v]==="Text")p.text=v;for(;++g<o&&b[g]&&b[g][0]!=="[";)try{f.push(d("subtitle",j(b[g],p)))}catch(w){}c.data=f;return c})})(Popcorn);(function(m){function j(g,o,t){var p=g.firstChild;g=k(g,t);t=[];for(var q;p;){if(p.nodeType===1)if(p.nodeName==="p")t.push(d(p,o,g));else if(p.nodeName==="div"){q=b(p.getAttribute("begin"));if(q<0)q=o;t.push.apply(t,j(p,q,g))}p=p.nextSibling}return t}function k(g,o){var t=g.getAttribute("region");return t!==null?t:o||""}function d(g,o,t){var p={};p.text=(g.textContent||g.text).replace(c,"").replace(f,"<br />");p.id=g.getAttribute("xml:id")||g.getAttribute("id");p.start=b(g.getAttribute("begin"),o);
p.end=b(g.getAttribute("end"),o);p.target=k(g,t);if(p.end<0){p.end=b(g.getAttribute("duration"),0);if(p.end>=0)p.end+=p.start;else p.end=Number.MAX_VALUE}return{subtitle:p}}function b(g,o){var t;if(!g)return-1;try{return m.util.toSeconds(g)}catch(p){for(var q=g.length-1;q>=0&&g[q]<="9"&&g[q]>="0";)q--;t=q;q=parseFloat(g.substring(0,t));t=g.substring(t);return q*({h:3600,m:60,s:1,ms:0.0010}[t]||-1)+(o||0)}}var c=/^[\s]+|[\s]+$/gm,f=/(?:\r\n|\r|\n)/gm;m.parser("parseTTML",function(g){var o={title:"",
remote:"",data:[]};if(!g.xml||!g.xml.documentElement)return o;g=g.xml.documentElement.firstChild;if(!g)return o;for(;g.nodeName!=="body";)g=g.nextSibling;if(g)o.data=j(g,0);return o})})(Popcorn);(function(m){m.parser("parseTTXT",function(j){var k={title:"",remote:"",data:[]},d=function(o){o=o.split(":");var t=0;try{return parseFloat(o[0],10)*60*60+parseFloat(o[1],10)*60+parseFloat(o[2],10)}catch(p){t=0}return t},b=function(o,t){var p={};p[o]=t;return p};j=j.xml.lastChild.lastChild;for(var c=Number.MAX_VALUE,f=[];j;){if(j.nodeType===1&&j.nodeName==="TextSample"){var g={};g.start=d(j.getAttribute("sampleTime"));g.text=j.getAttribute("text");if(g.text){g.end=c-0.0010;f.push(b("subtitle",g))}c=
g.start}j=j.previousSibling}k.data=f.reverse();return k})})(Popcorn);(function(m){function j(d){var b=d.split(":");d=d.length;var c;if(d!==12&&d!==9)throw"Bad cue";d=b.length-1;try{c=parseInt(b[d-1],10)*60+parseFloat(b[d],10);if(d===2)c+=parseInt(b[0],10)*3600}catch(f){throw"Bad cue";}return c}function k(d,b){var c={};c[d]=b;return c}m.parser("parseVTT",function(d){var b={title:"",remote:"",data:[]},c=[],f=0,g=0,o,t;d=d.text.split(/(?:\r\n|\r|\n)/gm);g=d.length;if(g===0||d[0]!=="WEBVTT")return b;for(f++;f<g;){o=[];try{for(var p=f;p<g&&!d[p];)p++;f=p;var q=d[f++];p=
void 0;var v={};if(!q||q.indexOf("--\>")===-1)throw"Bad cue";p=q.replace(/--\>/," --\> ").split(/[\t ]+/);if(p.length<2)throw"Bad cue";v.id=q;v.start=j(p[0]);v.end=j(p[2]);for(t=v;f<g&&d[f];)o.push(d[f++]);t.text=o.join("<br />");c.push(k("subtitle",t))}catch(w){for(f=f;f<g&&d[f];)f++;f=f}}b.data=c;return b})})(Popcorn);(function(m){m.parser("parseXML","XML",function(j){var k={title:"",remote:"",data:[]},d={},b=function(p){p=p.split(":");if(p.length===1)return parseFloat(p[0],10);else if(p.length===2)return parseFloat(p[0],10)+parseFloat(p[1]/12,10);else if(p.length===3)return parseInt(p[0]*60,10)+parseFloat(p[1],10)+parseFloat(p[2]/12,10);else if(p.length===4)return parseInt(p[0]*3600,10)+parseInt(p[1]*60,10)+parseFloat(p[2],10)+parseFloat(p[3]/12,10)},c=function(p){for(var q={},v=0,w=p.length;v<w;v++){var A=p.item(v).nodeName,
G=p.item(v).nodeValue,y=d[G];if(A==="in")q.start=b(G);else if(A==="out")q.end=b(G);else if(A==="resourceid")for(var i in y){if(y.hasOwnProperty(i))if(!q[i]&&i!=="id")q[i]=y[i]}else q[A]=G}return q},f=function(p,q){var v={};v[p]=q;return v},g=function(p,q,v){var w={};m.extend(w,q,c(p.attributes),{text:p.textContent||p.text});q=p.childNodes;if(q.length<1||q.length===1&&q[0].nodeType===3)if(v)d[w.id]=w;else k.data.push(f(p.nodeName,w));else for(p=0;p<q.length;p++)q[p].nodeType===1&&g(q[p],w,v)};j=j.documentElement.childNodes;
for(var o=0,t=j.length;o<t;o++)if(j[o].nodeType===1)j[o].nodeName==="manifest"?g(j[o],{},true):g(j[o],{},false);return k})})(Popcorn);(function(m,j){j.player("soundcloud",{_canPlayType:function(k,d){return typeof d==="string"&&j.HTMLSoundCloudAudioElement._canPlaySrc(d)&&k.toLowerCase()!=="audio"}});j.soundcloud=function(k,d,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'soundcloud'. Please use Popcorn.HTMLSoundCloudAudioElement directly.");var c=j.HTMLSoundCloudAudioElement(k);k=j(c,b);setTimeout(function(){c.src=d},0);return k}})(window,Popcorn);(function(m,j){j.player("vimeo",{_canPlayType:function(k,d){return typeof d==="string"&&j.HTMLVimeoVideoElement._canPlaySrc(d)}});j.vimeo=function(k,d,b){typeof console!=="undefined"&&console.warn&&console.warn("Deprecated player 'vimeo'. Please use Popcorn.HTMLVimeoVideoElement directly.");var c=j.HTMLVimeoVideoElement(k);k=j(c,b);setTimeout(function(){c.src=d},0);return k}})(window,Popcorn);(function(m,j){var k=/(?:http:\/\/www\.|http:\/\/|www\.|\.|^)(?:youtu).*(?:\/|v=)(.{11})/;m.onYouTubePlayerAPIReady=function(){onYouTubePlayerAPIReady.ready=true;for(var b=0;b<onYouTubePlayerAPIReady.waiting.length;b++)onYouTubePlayerAPIReady.waiting[b]()};if(m.YT){m.quarantineYT=m.YT;m.YT=null}onYouTubePlayerAPIReady.waiting=[];var d=false;j.player("youtube",{_canPlayType:function(b,c){return typeof c==="string"&&k.test(c)&&b.toLowerCase()!=="video"},_setup:function(b){if(!m.YT&&!d){d=true;j.getScript("//youtube.com/player_api")}var c=
this,f=false,g=document.createElement("div"),o=0,t=true,p=false,q=0,v=false,w=100,A=j.player.playerQueue(),G=function(){j.player.defineProperty(c,"currentTime",{set:function(i){if(!b.destroyed){i=Number(i);if(!isNaN(i)){o=i;p=true;c.dispatchEvent("seeking");b.youtubeObject.seekTo(i)}}},get:function(){return o}});j.player.defineProperty(c,"paused",{get:function(){return t}});j.player.defineProperty(c,"muted",{set:function(i){if(b.destroyed)return i;if(b.youtubeObject.isMuted()!==i){i?b.youtubeObject.mute():
b.youtubeObject.unMute();v=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}return b.youtubeObject.isMuted()},get:function(){if(b.destroyed)return 0;return b.youtubeObject.isMuted()}});j.player.defineProperty(c,"volume",{set:function(i){if(b.destroyed)return i;if(b.youtubeObject.getVolume()/100!==i){b.youtubeObject.setVolume(i*100);w=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}return b.youtubeObject.getVolume()/100},get:function(){if(b.destroyed)return 0;return b.youtubeObject.getVolume()/
100}});c.play=function(){if(!b.destroyed){t=false;A.add(function(){if(b.youtubeObject.getPlayerState()!==1){p=false;b.youtubeObject.playVideo()}else A.next()})}};c.pause=function(){if(!b.destroyed){t=true;A.add(function(){b.youtubeObject.getPlayerState()!==2?b.youtubeObject.pauseVideo():A.next()})}}};g.id=c.id+j.guid();b._container=g;c.appendChild(g);var y=function(){var i,I,B,K,a=true,h=0.1,l=function(){if(!b.destroyed){var x=b.youtubeObject.getCurrentTime();if(p)if(o>=x-h&&o<=x+h){p=false;h=0.1;
c.dispatchEvent("seeked")}else{h*=2;b.youtubeObject.seekTo(o)}else o=x;c.dispatchEvent("timeupdate");setTimeout(l,200)}},e=function(x){var D=b.youtubeObject.getDuration();if(isNaN(D)||D===0)setTimeout(function(){e(x*2)},x*1E3);else{c.duration=D;c.dispatchEvent("durationchange");c.dispatchEvent("loadedmetadata");c.dispatchEvent("loadeddata");c.readyState=4;l();c.dispatchEvent("canplay");c.dispatchEvent("canplaythrough")}};b.controls=+b.controls===0||+b.controls===1?b.controls:0;b.annotations=+b.annotations===
1||+b.annotations===3?b.annotations:1;i=k.exec(c.src)[1];I=(c.src.split("?")[1]||"").replace(/v=.{11}/,"");I=I.replace(/&t=(?:(\d+)m)?(?:(\d+)s)?/,function(x,D,C){D|=0;C|=0;q=+C+D*60;return""});I=I.replace(/&start=(\d+)?/,function(x,D){D|=0;q=D;return""});f=/autoplay=1/.test(I);I=I.split(/[\&\?]/g);B={wmode:"transparent"};for(var u=0;u<I.length;u++){K=I[u].split("=");B[K[0]]=K[1]}B.rel=B.rel||0;B.modestbranding=B.modestbranding||1;B.iv_load_policy=B.iv_load_policy||3;B.showinfo=B.showinfo||0;B.controls=
B.controls||b.controls||0;b.youtubeObject=new YT.Player(g.id,{height:"100%",width:"100%",wmode:"transparent",playerVars:B,videoId:i,events:{onReady:function(){w=c.volume;v=c.muted;s();t=c.paused;G();b.youtubeObject.playVideo();c.currentTime=q;c.dispatchEvent("loadstart")},onStateChange:function(x){if(!(b.destroyed||x.data===-1))if(x.data===2){t=true;c.dispatchEvent("pause");A.next()}else if(x.data===1&&!a){t=false;c.dispatchEvent("play");c.dispatchEvent("playing");A.next()}else if(x.data===0)c.dispatchEvent("ended");
else if(x.data===1&&a){a=false;if(f||!c.paused)t=false;t&&b.youtubeObject.pauseVideo();e(0.025)}},onError:function(x){if([2,100,101,150].indexOf(x.data)!==-1){c.error={customCode:x.data};c.dispatchEvent("error")}}}});var s=function(){if(!b.destroyed){if(v!==b.youtubeObject.isMuted()){v=b.youtubeObject.isMuted();c.dispatchEvent("volumechange")}if(w!==b.youtubeObject.getVolume()){w=b.youtubeObject.getVolume();c.dispatchEvent("volumechange")}setTimeout(s,250)}}};onYouTubePlayerAPIReady.ready?y():onYouTubePlayerAPIReady.waiting.push(y)},
_teardown:function(b){b.destroyed=true;var c=b.youtubeObject;if(c){c.stopVideo();c.clearVideo&&c.clearVideo()}this.removeChild(document.getElementById(b._container.id))}})})(window,Popcorn);
